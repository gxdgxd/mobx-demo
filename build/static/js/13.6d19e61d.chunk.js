(this.webpackJsonpapi_automation_static=this.webpackJsonpapi_automation_static||[]).push([[13],{1497:function(e,t,a){},1499:function(e,t,a){"use strict";var n,r,i=a(16),l=a.n(i),s=a(29),o=(a(1478),a(1479)),c=(a(1468),a(13)),u=a(65),p=a(1495),d=a(1494),m=a(66),h=a(1496),g=(a(1483),a(1484)),b=a(0),f=a.n(b),E=(a(5),a(416)),v=a(237),y=(a(1474),a(1475)),O=(a(1469),a(1470)),T=(a(637),a(1466)),M=(a(1465),a(1467)),j=M.a.Item,S=Object(E.b)("TreeManagerStore")(n=Object(E.c)(n=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"okModal",value:function(){var e=this;this.props.form.validateFieldsAndScroll((function(t,a){t||e.props.TreeManagerStore.insertTreeModule()}))}},{key:"hideModal",value:function(){this.props.TreeManagerStore.hideTreeModal()}},{key:"inputChange",value:function(e,t){t.target.value,this.props.TreeManagerStore.changeTableRequestData(e,t.target.value)}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props,a=t.treeModalVisible,n=t.tableRequestData,r=t.modalName;return f.a.createElement(y.a,Object(v.a)({destroyOnClose:!0,title:r,width:"900px",visible:a,onOk:this.okModal.bind(this),onCancel:this.hideModal.bind(this),okText:"\u4fdd\u5b58",cancelText:"\u53d6\u6d88",className:"model"},"width",500),f.a.createElement(M.a,{layout:"inline",className:"ant-advanced-search-form p-xs pb-0"},f.a.createElement(O.a,null,f.a.createElement(j,Object.assign({},this.formItemLayout,{label:"\u6a21\u5757\u540d\u79f0"}),e("name",{initialValue:n.name,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u6a21\u5757\u540d\u79f0!"}]})(f.a.createElement(T.a,{style:{width:250},placeholder:"\u8bf7\u586b\u5199\u6a21\u5757\u540d\u79f0!",onChange:this.inputChange.bind(this,"name")}))))))}}]),t}(b.Component))||n)||n,k=M.a.create()(S),I=(a(419),g.a.TreeNode),C=Object(E.b)("TreeManagerStore","TestCaseManagerStore","ApiManagerStore")(r=Object(E.c)(r=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).onSelect=function(e,t){console.log(t);var n=t.node.props.dataRef.appId,r=t.node.props.dataRef.moduleId,i=t.node.props.dataRef.appName,l=t.node.props.dataRef.moduleName,s=a.props.pageType;"case"==s?a.props.TestCaseManagerStore.initData(1,n,r):"api"==s?a.props.ApiManagerStore.initData(1,n,r):"insertApi"==s?a.props.ApiManagerStore.setTreeParams(n,r,i,l):"updateApi"==s&&a.props.ApiManagerStore.setTreeParams(n,r,i,l)},a.handleAddTree=function(e,t){e.stopPropagation(),t.id&&(console.log(e.target.value),a.props.TreeManagerStore.showTreeModal({moduleName:"\u6dfb\u52a0\u6a21\u5757",type:"insert",item:t}))},a.handleEditTree=function(e,t){e.stopPropagation(),t.id&&a.props.TreeManagerStore.showTreeModal({moduleName:"\u4fee\u6539\u6a21\u5757",type:"update",item:t})},a.handleDeleteTree=function(e){e.id&&a.props.TreeManagerStore.deleteTree(e)},a.getNodeTitle=function(e,t,n,r){return f.a.createElement("div",{className:"tree-title"},f.a.createElement("span",null,e),f.a.createElement("div",{className:"tree-parent-div "},f.a.createElement("span",{className:"tree-span",onClick:function(e){return a.handleAddTree(e,r)}},4!==n&&f.a.createElement(c.a,{type:"plus-circle",theme:"outlined"})),f.a.createElement("span",{className:"tree-span",onClick:function(e){return a.handleEditTree(e,r)}},1!=n&&f.a.createElement(c.a,{type:"form",theme:"outlined"})),f.a.createElement("span",{className:"tree-span"},1!=n&&f.a.createElement(o.a,{title:"\u786e\u5b9a\u5220\u9664\u6b64\u53c2\u6570\u5417\uff1f",onConfirm:function(){return a.handleDeleteTree(r)}},f.a.createElement(c.a,{type:"delete",theme:"outlined"})))))},a.onLoadData=function(){var e=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.props.children){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,a.props.TreeManagerStore.getTreeModuleDataSouce(t.props.dataRef,t.props.dataRef.parentId);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.renderTreeNodes=function(e,t){return e.map((function(e){var n=a.getNodeTitle(e.title,e.id,t,e);return e.children?f.a.createElement(I,{title:n,key:e.id,dataRef:e},a.renderTreeNodes(e.children,t+1)):f.a.createElement(I,Object.assign({},e,{title:n,key:e.id,dataRef:e}))}))},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.TreeManagerStore.getTreeAppDataSouce()}}]),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.TreeManagerStore,t=e.treeAppDataSource,a=e.treeModalVisible,n=e.tableRequestData,r=e.modalName;return f.a.createElement("div",{style:{maxHeight:this.props.maxHeight,"overflow-y":"auto"}},f.a.createElement(g.a,{onSelect:this.onSelect,loadData:this.onLoadData},this.renderTreeNodes(t,1)),f.a.createElement(k,{modalName:r,treeModalVisible:a,tableRequestData:n}))}}]),t}(b.Component))||r)||r;t.a=C},1537:function(e,t,a){"use strict";a.r(t);a(236);var n,r,i,l=a(69),s=(a(1468),a(13)),o=(a(638),a(417)),c=(a(1469),a(1470)),u=(a(1481),a(1482)),p=a(65),d=a(1495),m=a(1494),h=a(66),g=a(1496),b=(a(637),a(1466)),f=(a(1465),a(1467)),E=a(0),v=a.n(E),y=(a(5),a(416)),O=a(237),T=(a(1474),a(1475)),M=a(1499),j=(a(1497),Object(y.b)("ApiManagerStore")(n=Object(y.c)(n=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"okModal",value:function(){this.props.ApiManagerStore.setDetailDataTreeParams()}},{key:"hideTreeModal",value:function(){this.props.ApiManagerStore.hideTreeModal()}},{key:"render",value:function(){var e=this.props.treeModalVisible;return v.a.createElement(T.a,Object(O.a)({destroyOnClose:!0,title:"\u6dfb\u52a0",width:"900px",visible:e,onOk:this.okModal.bind(this),onCancel:this.hideTreeModal.bind(this),okText:"\u4fdd\u5b58",cancelText:"\u53d6\u6d88",className:"model"},"width",500),v.a.createElement("span",null,"\u91cd\u65b0\u9009\u62e9\u5e94\u7528\u548c\u6a21\u5757\uff08\u70b9\u51fb\u5bf9\u5e94\u7684\u5e94\u7528\u548c\u6a21\u5757\u5373\u4e3a\u9009\u4e2d\uff09"),v.a.createElement(M.a,{pageType:"updateApi",maxHeight:"420px"}))}}]),t}(E.Component))||n)||n),S=f.a.create()(j),k=(a(642),a(159)),I=a(16),C=a.n(I),N=a(277),w=a(29),A=Object(y.b)("TagManagerStore","ApiManagerStore")(r=Object(y.c)(r=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleClose=function(e){var t=a.props.tags.filter((function(t){return t.id!==e}));console.log(t),a.setState({tags:t})},a.showInput=function(){a.setState({inputVisible:!0},(function(){return a.input.focus()}))},a.handleInputChange=function(e){a.setState({inputValue:e.target.value})},a.handleInputConfirm=Object(w.a)(C.a.mark((function e(){var t,n,r,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.inputValue,n=a.state.tags,t&&-1===n.indexOf(t)&&(n=[].concat(Object(N.a)(n),[t])),e.next=5,a.props.TagManagerStore.postInsertTag(n[0]);case 5:r=e.sent,i={id:r.data,value:n[0]},a.props.getTags(i),a.setState({inputVisible:!1,inputValue:""});case 9:case"end":return e.stop()}}),e)}))),a.saveInputRef=function(e){return a.input=e},a.state={tags:[],inputVisible:!1,inputValue:""},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.inputVisible,n=t.inputValue;return v.a.createElement("div",null,this.props.tags.map((function(t,a){var n=t.length>20,r=v.a.createElement(o.a,{key:t.id,closable:!0,onClose:function(){return e.handleClose(t.id)}},n?"".concat(t.value.slice(0,20),"..."):t.value);return n?v.a.createElement(k.a,{title:t.value,key:t.id},r):r})),a&&v.a.createElement(b.a,{ref:this.saveInputRef,type:"text",size:"small",style:{width:78},value:n,onChange:this.handleInputChange,onBlur:this.handleInputConfirm,onPressEnter:this.handleInputConfirm}),!a&&v.a.createElement(o.a,{onClick:this.showInput,style:{background:"#fff",borderStyle:"dashed"}},v.a.createElement(s.a,{type:"plus"})," New Tag"))}}]),t}(E.Component))||r)||r,D=f.a.Item,x=b.a.TextArea,V=Object(y.b)("ApiManagerStore","TagManagerStore")(i=Object(y.c)(i=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).getTags=function(e){a.props.ApiManagerStore.insertTags(e)},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll((function(e,t){e||a.props.ApiManagerStore.updateApi(1)}))},a.state={},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.setBreadcrumb([{name:"\u63a5\u53e3\u7ba1\u7406"},{name:"\u4fee\u6539\u63a5\u53e3"}]),this.props.ApiManagerStore.getApiDetailData()}}]),Object(h.a)(t,[{key:"inputChange",value:function(e,t){var a={};a[e]=t.target.value,this.setState(a),this.props.ApiManagerStore.changeDetailData(e,t.target.value)}},{key:"showTreeModal",value:function(){this.props.ApiManagerStore.showTreeModal()}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props.ApiManagerStore,a=t.detailData,n=t.tags,r=t.treeModalVisible;return v.a.createElement("div",{style:{marginLeft:"15px"}},v.a.createElement(f.a,{layout:"inline",className:"ant-advanced-search-form p-xs pb-0",onSubmit:this.handleSubmit},v.a.createElement(u.a,{message:"api\u5305\u4fe1\u606f",type:"info",style:{backgroundColor:"#c7e7ff",border:"0px",marginBottom:"10px"}}),v.a.createElement(c.a,null,v.a.createElement(D,Object.assign({},this.formItemLayout,{label:"groupId"}),e("groupId",{initialValue:a.groupId,rules:[{required:!0,message:"\u8bf7\u586b\u5199groupId!"}]})(v.a.createElement(b.a,{disabled:!0,style:{width:190},value:a.groupId}))),v.a.createElement(D,Object.assign({},this.formItemLayout,{label:"artifactId"}),e("artifactId",{initialValue:a.artifactId,rules:[{required:!0,message:"\u8bf7\u586b\u5199artifactId!"}]})(v.a.createElement(b.a,{disabled:!0,style:{width:190},value:a.groupId})))),v.a.createElement(u.a,{message:"\u63a5\u53e3\u4fe1\u606f",type:"info",style:{backgroundColor:"#c7e7ff",border:"0px",marginBottom:"10px"}}),v.a.createElement(c.a,null,v.a.createElement(D,Object.assign({},this.formItemLayout,{label:""}),v.a.createElement(o.a,{color:"geekblue"},"\u63a5\u53e3\u5f52\u5c5e\u5e94\u7528\uff1a",a.appName)),v.a.createElement(D,Object.assign({},this.formItemLayout,{label:""}),v.a.createElement(o.a,{color:"geekblue"},"\u63a5\u53e3\u5f52\u5c5e\u6a21\u5757\uff1a",a.moduleName)),v.a.createElement(D,Object.assign({},this.formItemLayout,{label:""}),v.a.createElement("a",{href:"#",onClick:this.showTreeModal.bind(this)},v.a.createElement(s.a,{type:"edit"})," \u7f16\u8f91"),v.a.createElement(S,{treeModalVisible:r}))),v.a.createElement(c.a,null,v.a.createElement(D,Object.assign({},this.formItemLayout,{label:"\u63a5\u53e3\u8def\u5f84"}),e("apiClassName",{initialValue:a.apiClassName,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u63a5\u53e3\u8def\u5f84!"}]})(v.a.createElement(b.a,{disabled:!0,style:{width:823}})))),v.a.createElement(c.a,null,v.a.createElement(D,Object.assign({},this.formItemLayout,{label:"\u65b9\u6cd5\u540d"}),e("apiMethodName",{initialValue:a.apiMethodName,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u65b9\u6cd5\u540d!"}]})(v.a.createElement(b.a,{disabled:!0,style:{width:375}}))),v.a.createElement(D,Object.assign({},this.formItemLayout,{label:"\u63a5\u53e3\u540d"}),e("name",{initialValue:a.name,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u63a5\u53e3\u540d!"}]})(v.a.createElement(b.a,{style:{width:378},onChange:this.inputChange.bind(this,"name")})))),v.a.createElement(c.a,null,v.a.createElement(D,Object.assign({},this.formItemLayout,{label:"\u521b\u5efa\u4eba"}),e("creatorName",{initialValue:a.creatorName,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u521b\u5efa\u4eba!"}]})(v.a.createElement(b.a,{disabled:!0,style:{width:145}}))),v.a.createElement(D,Object.assign({},this.formItemLayout,{label:"\u63a5\u53e3\u6807\u7b7e"}),v.a.createElement(A,{tags:n,getTags:this.getTags}))),v.a.createElement(c.a,null,v.a.createElement(D,Object.assign({},this.formItemLayout,{label:"\u63cf\u8ff0"}),e("desc",{initialValue:a.desc,rules:[{required:!1,message:"\u8bf7\u586b\u5199\u63cf\u8ff0!"}]})(v.a.createElement(x,{rows:3,style:{width:852},value:a.desc,onChange:this.inputChange.bind(this,"desc")})))),v.a.createElement(c.a,null,v.a.createElement(f.a.Item,null,v.a.createElement(l.a,{type:"primary",htmlType:"submit"},"\u4fee\u6539")))))}}]),t}(E.Component))||i)||i;t.default=f.a.create()(V)}}]);
//# sourceMappingURL=13.6d19e61d.chunk.js.map