(this.webpackJsonpapi_automation_static=this.webpackJsonpapi_automation_static||[]).push([[9],{1488:function(e,t,a){},1490:function(e,t,a){"use strict";var n,r,i=a(16),l=a.n(i),s=a(29),o=(a(1475),a(1476)),c=(a(1466),a(14)),u=a(65),p=a(1486),d=a(1485),m=a(66),h=a(1487),g=(a(1480),a(1481)),b=a(0),f=a.n(b),E=(a(7),a(415)),v=a(236),y=(a(1471),a(1473)),O=(a(1465),a(1467)),T=(a(636),a(1463)),M=(a(1462),a(1464)),j=M.a.Item,S=Object(E.b)("TreeManagerStore")(n=Object(E.c)(n=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"okModal",value:function(){var e=this;this.props.form.validateFieldsAndScroll((function(t,a){t||e.props.TreeManagerStore.insertTreeModule()}))}},{key:"hideModal",value:function(){this.props.TreeManagerStore.hideTreeModal()}},{key:"inputChange",value:function(e,t){t.target.value,this.props.TreeManagerStore.changeTableRequestData(e,t.target.value)}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props,a=t.treeModalVisible,n=t.tableRequestData,r=t.modalName;return f.a.createElement(y.a,Object(v.a)({destroyOnClose:!0,title:r,width:"900px",visible:a,onOk:this.okModal.bind(this),onCancel:this.hideModal.bind(this),okText:"\u4fdd\u5b58",cancelText:"\u53d6\u6d88",className:"model"},"width",500),f.a.createElement(M.a,{layout:"inline",className:"ant-advanced-search-form p-xs pb-0"},f.a.createElement(O.a,null,f.a.createElement(j,Object.assign({},this.formItemLayout,{label:"\u6a21\u5757\u540d\u79f0"}),e("name",{initialValue:n.name,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u6a21\u5757\u540d\u79f0!"}]})(f.a.createElement(T.a,{style:{width:250},placeholder:"\u8bf7\u586b\u5199\u6a21\u5757\u540d\u79f0!",onChange:this.inputChange.bind(this,"name")}))))))}}]),t}(b.Component))||n)||n,I=M.a.create()(S),k=(a(418),g.a.TreeNode),C=Object(E.b)("TreeManagerStore","TestCaseManagerStore","ApiManagerStore")(r=Object(E.c)(r=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).onSelect=function(e,t){console.log(t);var n=t.node.props.dataRef.appId,r=t.node.props.dataRef.moduleId,i=t.node.props.dataRef.appName,l=t.node.props.dataRef.moduleName,s=a.props.pageType;"case"==s?a.props.TestCaseManagerStore.initData(1,n,r):"api"==s?a.props.ApiManagerStore.initData(1,n,r):"insertApi"==s?a.props.ApiManagerStore.setTreeParams(n,r,i,l):"updateApi"==s&&a.props.ApiManagerStore.setTreeParams(n,r,i,l)},a.handleAddTree=function(e,t,n,r){e.stopPropagation(),t&&(console.log(e.target.value),a.props.TreeManagerStore.showTreeModal({moduleName:"\u6dfb\u52a0\u6a21\u5757",parentId:n,appId:r,type:"insert"}))},a.handleEditTree=function(e,t,n,r,i){e.stopPropagation(),n&&a.props.TreeManagerStore.showTreeModal({id:n,moduleName:"\u4fee\u6539\u6a21\u5757",parentIdF:r,appId:i,name:t,type:"update"})},a.handleDeleteTree=function(e,t,n){e&&a.props.TreeManagerStore.deleteTree(e,t,n)},a.getNodeTitle=function(e,t,n,r,i,l){return f.a.createElement("div",{className:"tree-title"},f.a.createElement("span",null,e),f.a.createElement("div",{className:"tree-parent-div "},f.a.createElement("span",{className:"tree-span",onClick:function(e){return a.handleAddTree(e,t,r,l)}},4!==n&&f.a.createElement(c.a,{type:"plus-circle",theme:"outlined"})),f.a.createElement("span",{className:"tree-span",onClick:function(n){return a.handleEditTree(n,e,t,i,l)}},1!=n&&f.a.createElement(c.a,{type:"form",theme:"outlined"})),f.a.createElement("span",{className:"tree-span"},1!=n&&f.a.createElement(o.a,{title:"\u786e\u5b9a\u5220\u9664\u6b64\u53c2\u6570\u5417\uff1f",onConfirm:function(){return a.handleDeleteTree(t,l,r)}},f.a.createElement(c.a,{type:"delete",theme:"outlined"})))))},a.onLoadData=function(){var e=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.props.children){e.next=2;break}return e.abrupt("return");case 2:a.props.TreeManagerStore.getTreeModuleDataSouce(t.props.dataRef);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.renderTreeNodes=function(e,t){return e.map((function(e){var n=a.getNodeTitle(e.title,e.id,t,e.parentId,e.parentIdF,e.appId);return e.children?f.a.createElement(k,{title:n,key:e.id,dataRef:e},a.renderTreeNodes(e.children,t+1)):f.a.createElement(k,Object.assign({},e,{title:n,key:e.id,dataRef:e}))}))},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.TreeManagerStore.getTreeAppDataSouce()}}]),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.TreeManagerStore,t=e.treeAppDataSource,a=e.treeModalVisible,n=e.tableRequestData,r=e.modalName;return f.a.createElement("div",{style:{maxHeight:this.props.maxHeight,"overflow-y":"auto"}},f.a.createElement(g.a,{onSelect:this.onSelect,loadData:this.onLoadData},this.renderTreeNodes(t,1)),f.a.createElement(I,{modalName:r,treeModalVisible:a,tableRequestData:n}))}}]),t}(b.Component))||r)||r;t.a=C},1496:function(e,t,a){"use strict";a(1466);var n,r=a(14),i=(a(636),a(1463)),l=(a(641),a(159)),s=(a(638),a(416)),o=a(16),c=a.n(o),u=a(237),p=a(29),d=a(65),m=a(66),h=a(1486),g=a(1485),b=a(1487),f=a(0),E=a.n(f),v=a(415),y=Object(v.b)("TagManagerStore","ApiManagerStore")(n=Object(v.c)(n=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).handleClose=function(e){var t=a.props.tags.filter((function(t){return t.id!==e}));console.log(t),a.setState({tags:t})},a.showInput=function(){a.setState({inputVisible:!0},(function(){return a.input.focus()}))},a.handleInputChange=function(e){a.setState({inputValue:e.target.value})},a.handleInputConfirm=Object(p.a)(c.a.mark((function e(){var t,n,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.inputValue,n=a.state.tags,t&&-1===n.indexOf(t)&&(n=[].concat(Object(u.a)(n),[t])),e.next=5,a.props.TagManagerStore.postInsertTag(n[0]);case 5:r=e.sent,i={id:r.data,value:n[0]},a.props.getTags(i),a.setState({inputVisible:!1,inputValue:""});case 9:case"end":return e.stop()}}),e)}))),a.saveInputRef=function(e){return a.input=e},a.state={tags:[],inputVisible:!1,inputValue:""},a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.inputVisible,n=t.inputValue;return E.a.createElement("div",null,this.props.tags.map((function(t,a){var n=t.length>20,r=E.a.createElement(s.a,{key:t.id,closable:!0,onClose:function(){return e.handleClose(t.id)}},n?"".concat(t.value.slice(0,20),"..."):t.value);return n?E.a.createElement(l.a,{title:t.value,key:t.id},r):r})),a&&E.a.createElement(i.a,{ref:this.saveInputRef,type:"text",size:"small",style:{width:78},value:n,onChange:this.handleInputChange,onBlur:this.handleInputConfirm,onPressEnter:this.handleInputConfirm}),!a&&E.a.createElement(s.a,{onClick:this.showInput,style:{background:"#fff",borderStyle:"dashed"}},E.a.createElement(r.a,{type:"plus"})," New Tag"))}}]),t}(f.Component))||n)||n;t.a=y},1530:function(e,t,a){"use strict";a.r(t);a(235);var n,r,i=a(69),l=(a(1466),a(14)),s=(a(638),a(416)),o=(a(1465),a(1467)),c=(a(1478),a(1479)),u=a(65),p=a(1486),d=a(1485),m=a(66),h=a(1487),g=(a(636),a(1463)),b=(a(1462),a(1464)),f=a(0),E=a.n(f),v=(a(7),a(415)),y=a(236),O=(a(1471),a(1473)),T=a(1490),M=(a(1488),Object(v.b)("ApiManagerStore")(n=Object(v.c)(n=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"okModal",value:function(){this.props.ApiManagerStore.setDetailDataTreeParams()}},{key:"hideTreeModal",value:function(){this.props.ApiManagerStore.hideTreeModal()}},{key:"render",value:function(){var e=this.props.treeModalVisible;return E.a.createElement(O.a,Object(y.a)({destroyOnClose:!0,title:"\u6dfb\u52a0",width:"900px",visible:e,onOk:this.okModal.bind(this),onCancel:this.hideTreeModal.bind(this),okText:"\u4fdd\u5b58",cancelText:"\u53d6\u6d88",className:"model"},"width",500),E.a.createElement("span",null,"\u91cd\u65b0\u9009\u62e9\u5e94\u7528\u548c\u6a21\u5757\uff08\u70b9\u51fb\u5bf9\u5e94\u7684\u5e94\u7528\u548c\u6a21\u5757\u5373\u4e3a\u9009\u4e2d\uff09"),E.a.createElement(T.a,{pageType:"updateApi",maxHeight:"420px"}))}}]),t}(f.Component))||n)||n),j=b.a.create()(M),S=a(1496),I=b.a.Item,k=g.a.TextArea,C=Object(v.b)("ApiManagerStore","TagManagerStore")(r=Object(v.c)(r=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).getTags=function(e){a.props.ApiManagerStore.insertTags(e)},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll((function(e,t){e||a.props.ApiManagerStore.updateApi(1)}))},a.state={},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.setBreadcrumb([{name:"\u63a5\u53e3\u7ba1\u7406"},{name:"\u4fee\u6539\u63a5\u53e3"}]),this.props.ApiManagerStore.getApiDetailData()}}]),Object(m.a)(t,[{key:"inputChange",value:function(e,t){var a={};a[e]=t.target.value,this.setState(a),this.props.ApiManagerStore.changeDetailData(e,t.target.value)}},{key:"showTreeModal",value:function(){this.props.ApiManagerStore.showTreeModal()}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props.ApiManagerStore,a=t.detailData,n=t.tags,r=t.treeModalVisible;return E.a.createElement("div",{style:{marginLeft:"15px"}},E.a.createElement(b.a,{layout:"inline",className:"ant-advanced-search-form p-xs pb-0",onSubmit:this.handleSubmit},E.a.createElement(c.a,{message:"api\u5305\u4fe1\u606f",type:"info",style:{backgroundColor:"#c7e7ff",border:"0px",marginBottom:"10px"}}),E.a.createElement(o.a,null,E.a.createElement(I,Object.assign({},this.formItemLayout,{label:"groupId"}),e("groupId",{initialValue:a.groupId,rules:[{required:!0,message:"\u8bf7\u586b\u5199groupId!"}]})(E.a.createElement(g.a,{disabled:!0,style:{width:190},value:a.groupId}))),E.a.createElement(I,Object.assign({},this.formItemLayout,{label:"artifactId"}),e("artifactId",{initialValue:a.artifactId,rules:[{required:!0,message:"\u8bf7\u586b\u5199artifactId!"}]})(E.a.createElement(g.a,{disabled:!0,style:{width:190},value:a.groupId})))),E.a.createElement(c.a,{message:"\u63a5\u53e3\u4fe1\u606f",type:"info",style:{backgroundColor:"#c7e7ff",border:"0px",marginBottom:"10px"}}),E.a.createElement(o.a,null,E.a.createElement(I,Object.assign({},this.formItemLayout,{label:""}),E.a.createElement(s.a,{color:"geekblue"},"\u63a5\u53e3\u5f52\u5c5e\u5e94\u7528\uff1a",a.appName)),E.a.createElement(I,Object.assign({},this.formItemLayout,{label:""}),E.a.createElement(s.a,{color:"geekblue"},"\u63a5\u53e3\u5f52\u5c5e\u6a21\u5757\uff1a",a.moduleName)),E.a.createElement(I,Object.assign({},this.formItemLayout,{label:""}),E.a.createElement("a",{href:"#",onClick:this.showTreeModal.bind(this)},E.a.createElement(l.a,{type:"edit"})," \u7f16\u8f91"),E.a.createElement(j,{treeModalVisible:r}))),E.a.createElement(o.a,null,E.a.createElement(I,Object.assign({},this.formItemLayout,{label:"\u63a5\u53e3\u8def\u5f84"}),e("apiClassName",{initialValue:a.apiClassName,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u63a5\u53e3\u8def\u5f84!"}]})(E.a.createElement(g.a,{disabled:!0,style:{width:823}})))),E.a.createElement(o.a,null,E.a.createElement(I,Object.assign({},this.formItemLayout,{label:"\u65b9\u6cd5\u540d"}),e("apiMethodName",{initialValue:a.apiMethodName,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u65b9\u6cd5\u540d!"}]})(E.a.createElement(g.a,{disabled:!0,style:{width:375}}))),E.a.createElement(I,Object.assign({},this.formItemLayout,{label:"\u63a5\u53e3\u540d"}),e("name",{initialValue:a.name,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u63a5\u53e3\u540d!"}]})(E.a.createElement(g.a,{style:{width:378},onChange:this.inputChange.bind(this,"name")})))),E.a.createElement(o.a,null,E.a.createElement(I,Object.assign({},this.formItemLayout,{label:"\u521b\u5efa\u4eba"}),e("creatorName",{initialValue:a.creatorName,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u521b\u5efa\u4eba!"}]})(E.a.createElement(g.a,{disabled:!0,style:{width:145}}))),E.a.createElement(I,Object.assign({},this.formItemLayout,{label:"\u63a5\u53e3\u6807\u7b7e"}),E.a.createElement(S.a,{tags:n,getTags:this.getTags}))),E.a.createElement(o.a,null,E.a.createElement(I,Object.assign({},this.formItemLayout,{label:"\u63cf\u8ff0"}),e("desc",{initialValue:a.desc,rules:[{required:!1,message:"\u8bf7\u586b\u5199\u63cf\u8ff0!"}]})(E.a.createElement(k,{rows:3,style:{width:852},value:a.desc,onChange:this.inputChange.bind(this,"desc")})))),E.a.createElement(o.a,null,E.a.createElement(b.a.Item,null,E.a.createElement(i.a,{type:"primary",htmlType:"submit"},"\u4fee\u6539")))))}}]),t}(f.Component))||r)||r;t.default=b.a.create()(C)}}]);
//# sourceMappingURL=9.58126915.chunk.js.map