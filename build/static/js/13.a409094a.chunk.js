(this.webpackJsonpapi_automation_static=this.webpackJsonpapi_automation_static||[]).push([[13],{1497:function(e,t,a){},1499:function(e,t,a){"use strict";a(1476);var n,r,i=a(1477),l=(a(1466),a(13)),o=a(65),s=a(1495),c=a(1494),u=a(66),p=a(1496),d=(a(1483),a(1484)),m=a(0),h=a.n(m),g=(a(3),a(416)),b=a(237),f=(a(1474),a(1475)),E=(a(1469),a(1470)),y=(a(637),a(1465)),v=(a(1467),a(1468)),O=v.a.Item,T=Object(g.b)("TreeManagerStore")(n=Object(g.c)(n=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).state={},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"okModal",value:function(){var e=this;this.props.form.validateFieldsAndScroll((function(t,a){t||e.props.TreeManagerStore.insertTreeModule()}))}},{key:"hideModal",value:function(){this.props.TreeManagerStore.hideTreeModal()}},{key:"inputChange",value:function(e,t){t.target.value,this.props.TreeManagerStore.changeTableRequestData(e,t.target.value)}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props,a=t.treeModalVisible,n=t.tableRequestData,r=t.modalName;return h.a.createElement(f.a,Object(b.a)({destroyOnClose:!0,title:r,width:"900px",visible:a,onOk:this.okModal.bind(this),onCancel:this.hideModal.bind(this),okText:"\u4fdd\u5b58",cancelText:"\u53d6\u6d88",className:"model"},"width",500),h.a.createElement(v.a,{layout:"inline",className:"ant-advanced-search-form p-xs pb-0"},h.a.createElement(E.a,null,h.a.createElement(O,Object.assign({},this.formItemLayout,{label:"\u6a21\u5757\u540d\u79f0"}),e("name",{initialValue:n.name,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u6a21\u5757\u540d\u79f0!"}]})(h.a.createElement(y.a,{style:{width:250},placeholder:"\u8bf7\u586b\u5199\u6a21\u5757\u540d\u79f0!",onChange:this.inputChange.bind(this,"name")}))))))}}]),t}(m.Component))||n)||n,M=v.a.create()(T),j=(a(419),d.a.TreeNode),I=Object(g.b)("TreeManagerStore","TestCaseManagerStore","ApiManagerStore")(r=Object(g.c)(r=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).onNodeSelect=function(e,t){console.log(e,t.node.props);var n="",r="",i="",l="";1==t.node.props.level?(n=e[0],i=t.node.props.title):(n=t.node.props.appId,r=t.node.props.moduleId,i=t.node.props.appName,l=t.node.props.moduleName),console.log("appid",n,"moduleId",r,"appName",i,"moduleName",l);var o=a.props.pageType;"case"==o?a.props.TestCaseManagerStore.initData(1,n,r):"api"==o?a.props.ApiManagerStore.initData(1,n,r):"insertApi"==o?a.props.ApiManagerStore.setTreeParams(n,r,i,l):"updateApi"==o&&a.props.ApiManagerStore.setTreeParams(n,r,i,l)},a.onExpand=function(e){a.setState({expandedKeys:e})},a.handleAddTree=function(e,t,n){e.stopPropagation(),n.id&&(console.log(e.target.value),a.props.TreeManagerStore.showTreeModal({moduleName:"\u6dfb\u52a0\u6a21\u5757",type:"insert",item:n,parentId:t}))},a.handleEditTree=function(e,t,n){e.stopPropagation(),n.id&&a.props.TreeManagerStore.showTreeModal({moduleName:"\u4fee\u6539\u6a21\u5757",type:"update",item:n,parentId:t})},a.handleDeleteTree=function(e){e.id&&a.props.TreeManagerStore.deleteTree(e)},a.getNodeTitle=function(e,t,n,r,o){return h.a.createElement("div",{className:"tree-title"},h.a.createElement("span",null,e," - ",r),h.a.createElement("div",{className:"tree-parent-div "},h.a.createElement("span",{className:"tree-span",onClick:function(e){return a.handleAddTree(e,r,o)}},5!==n&&h.a.createElement(l.a,{type:"plus-circle",theme:"outlined"})),h.a.createElement("span",{className:"tree-span",onClick:function(e){return a.handleEditTree(e,r,o)}},1!=n&&h.a.createElement(l.a,{type:"form",theme:"outlined"})),h.a.createElement("span",{className:"tree-span"},1!=n&&h.a.createElement(i.a,{title:"\u786e\u5b9a\u5220\u9664\u6b64\u53c2\u6570\u5417\uff1f",onConfirm:function(){return a.handleDeleteTree(o)}},h.a.createElement(l.a,{type:"delete",theme:"outlined"})))))},a.renderTree=function(e,t,n){return e&&e.map((function(e){var r=a.getNodeTitle(e.name,e.id,t,n,e);return e.modules&&e.modules.length>0?h.a.createElement(j,{title:r,key:e.id,level:t,appId:e.appId,moduleId:e.id,appName:e.appName,moduleName:e.name},a.renderTree(e.modules,t+1,e.id,e.id)):h.a.createElement(j,{title:r,key:e.id,level:t,appId:e.appId,appName:e.appName,moduleId:e.id,moduleName:e.name})}))},a.state={expandedKeys:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.TreeManagerStore.getTreeData()}}]),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.TreeManagerStore,t=e.treeAppDataSource,a=e.treeModalVisible,n=e.tableRequestData,r=e.modalName;return h.a.createElement("div",{style:{maxHeight:this.props.maxHeight,"overflow-y":"auto"}},h.a.createElement(d.a,{expandedKeys:this.state.expandedKeys,onSelect:this.onNodeSelect,onExpand:this.onExpand},this.renderTree(t,1,0)),h.a.createElement(M,{modalName:r,treeModalVisible:a,tableRequestData:n}))}}]),t}(m.Component))||r)||r;t.a=I},1537:function(e,t,a){"use strict";a.r(t);a(236);var n,r,i,l=a(70),o=(a(1466),a(13)),s=(a(638),a(417)),c=(a(1469),a(1470)),u=(a(1481),a(1482)),p=a(65),d=a(1495),m=a(1494),h=a(66),g=a(1496),b=(a(637),a(1465)),f=(a(1467),a(1468)),E=a(0),y=a.n(E),v=(a(3),a(416)),O=a(237),T=(a(1474),a(1475)),M=a(1499),j=(a(1497),Object(v.b)("ApiManagerStore")(n=Object(v.c)(n=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"okModal",value:function(){this.props.ApiManagerStore.setDetailDataTreeParams()}},{key:"hideTreeModal",value:function(){this.props.ApiManagerStore.hideTreeModal()}},{key:"render",value:function(){var e=this.props.treeModalVisible;return y.a.createElement(T.a,Object(O.a)({destroyOnClose:!0,title:"\u6dfb\u52a0",width:"900px",visible:e,onOk:this.okModal.bind(this),onCancel:this.hideTreeModal.bind(this),okText:"\u4fdd\u5b58",cancelText:"\u53d6\u6d88",className:"model"},"width",500),y.a.createElement("span",null,"\u91cd\u65b0\u9009\u62e9\u5e94\u7528\u548c\u6a21\u5757\uff08\u70b9\u51fb\u5bf9\u5e94\u7684\u5e94\u7528\u548c\u6a21\u5757\u5373\u4e3a\u9009\u4e2d\uff09"),y.a.createElement(M.a,{pageType:"updateApi",maxHeight:"420px"}))}}]),t}(E.Component))||n)||n),I=f.a.create()(j),S=(a(642),a(159)),k=a(15),N=a.n(k),C=a(277),x=a(28),w=Object(v.b)("TagManagerStore","ApiManagerStore")(r=Object(v.c)(r=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleClose=function(e){var t=a.props.tags.filter((function(t){return t.id!==e}));console.log(t),a.setState({tags:t})},a.showInput=function(){a.setState({inputVisible:!0},(function(){return a.input.focus()}))},a.handleInputChange=function(e){a.setState({inputValue:e.target.value})},a.handleInputConfirm=Object(x.a)(N.a.mark((function e(){var t,n,r,i;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.inputValue,n=a.state.tags,t&&-1===n.indexOf(t)&&(n=[].concat(Object(C.a)(n),[t])),e.next=5,a.props.TagManagerStore.postInsertTag(n[0]);case 5:r=e.sent,i={id:r.data,value:n[0]},a.props.getTags(i),a.setState({inputVisible:!1,inputValue:""});case 9:case"end":return e.stop()}}),e)}))),a.saveInputRef=function(e){return a.input=e},a.state={tags:[],inputVisible:!1,inputValue:""},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.inputVisible,n=t.inputValue;return y.a.createElement("div",null,this.props.tags.map((function(t,a){var n=t.length>20,r=y.a.createElement(s.a,{key:t.id,closable:!0,onClose:function(){return e.handleClose(t.id)}},n?"".concat(t.value.slice(0,20),"..."):t.value);return n?y.a.createElement(S.a,{title:t.value,key:t.id},r):r})),a&&y.a.createElement(b.a,{ref:this.saveInputRef,type:"text",size:"small",style:{width:78},value:n,onChange:this.handleInputChange,onBlur:this.handleInputConfirm,onPressEnter:this.handleInputConfirm}),!a&&y.a.createElement(s.a,{onClick:this.showInput,style:{background:"#fff",borderStyle:"dashed"}},y.a.createElement(o.a,{type:"plus"})," New Tag"))}}]),t}(E.Component))||r)||r,A=f.a.Item,V=b.a.TextArea,D=Object(v.b)("ApiManagerStore","TagManagerStore")(i=Object(v.c)(i=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).getTags=function(e){a.props.ApiManagerStore.insertTags(e)},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll((function(e,t){e||a.props.ApiManagerStore.updateApi(1)}))},a.state={},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.setBreadcrumb([{name:"\u63a5\u53e3\u7ba1\u7406"},{name:"\u4fee\u6539\u63a5\u53e3"}]),this.props.ApiManagerStore.getApiDetailData()}}]),Object(h.a)(t,[{key:"inputChange",value:function(e,t){var a={};a[e]=t.target.value,this.setState(a),this.props.ApiManagerStore.changeDetailData(e,t.target.value)}},{key:"showTreeModal",value:function(){this.props.ApiManagerStore.showTreeModal()}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props.ApiManagerStore,a=t.detailData,n=t.tags,r=t.treeModalVisible;return y.a.createElement("div",{style:{marginLeft:"15px"}},y.a.createElement(f.a,{layout:"inline",className:"ant-advanced-search-form p-xs pb-0",onSubmit:this.handleSubmit},y.a.createElement(u.a,{message:"api\u5305\u4fe1\u606f",type:"info",style:{backgroundColor:"#c7e7ff",border:"0px",marginBottom:"10px"}}),y.a.createElement(c.a,null,y.a.createElement(A,Object.assign({},this.formItemLayout,{label:"groupId"}),e("groupId",{initialValue:a.groupId,rules:[{required:!0,message:"\u8bf7\u586b\u5199groupId!"}]})(y.a.createElement(b.a,{disabled:!0,style:{width:190},value:a.groupId}))),y.a.createElement(A,Object.assign({},this.formItemLayout,{label:"artifactId"}),e("artifactId",{initialValue:a.artifactId,rules:[{required:!0,message:"\u8bf7\u586b\u5199artifactId!"}]})(y.a.createElement(b.a,{disabled:!0,style:{width:190},value:a.groupId})))),y.a.createElement(u.a,{message:"\u63a5\u53e3\u4fe1\u606f",type:"info",style:{backgroundColor:"#c7e7ff",border:"0px",marginBottom:"10px"}}),y.a.createElement(c.a,null,y.a.createElement(A,Object.assign({},this.formItemLayout,{label:""}),y.a.createElement(s.a,{color:"geekblue"},"\u63a5\u53e3\u5f52\u5c5e\u5e94\u7528\uff1a",a.appName)),y.a.createElement(A,Object.assign({},this.formItemLayout,{label:""}),y.a.createElement(s.a,{color:"geekblue"},"\u63a5\u53e3\u5f52\u5c5e\u6a21\u5757\uff1a",a.moduleName)),y.a.createElement(A,Object.assign({},this.formItemLayout,{label:""}),y.a.createElement("a",{href:"#",onClick:this.showTreeModal.bind(this)},y.a.createElement(o.a,{type:"edit"})," \u7f16\u8f91"),y.a.createElement(I,{treeModalVisible:r}))),y.a.createElement(c.a,null,y.a.createElement(A,Object.assign({},this.formItemLayout,{label:"\u63a5\u53e3\u8def\u5f84"}),e("apiClassName",{initialValue:a.apiClassName,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u63a5\u53e3\u8def\u5f84!"}]})(y.a.createElement(b.a,{disabled:!0,style:{width:823}})))),y.a.createElement(c.a,null,y.a.createElement(A,Object.assign({},this.formItemLayout,{label:"\u65b9\u6cd5\u540d"}),e("apiMethodName",{initialValue:a.apiMethodName,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u65b9\u6cd5\u540d!"}]})(y.a.createElement(b.a,{disabled:!0,style:{width:375}}))),y.a.createElement(A,Object.assign({},this.formItemLayout,{label:"\u63a5\u53e3\u540d"}),e("name",{initialValue:a.name,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u63a5\u53e3\u540d!"}]})(y.a.createElement(b.a,{style:{width:378},onChange:this.inputChange.bind(this,"name")})))),y.a.createElement(c.a,null,y.a.createElement(A,Object.assign({},this.formItemLayout,{label:"\u521b\u5efa\u4eba"}),e("creatorName",{initialValue:a.creatorName,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u521b\u5efa\u4eba!"}]})(y.a.createElement(b.a,{disabled:!0,style:{width:145}}))),y.a.createElement(A,Object.assign({},this.formItemLayout,{label:"\u63a5\u53e3\u6807\u7b7e"}),y.a.createElement(w,{tags:n,getTags:this.getTags}))),y.a.createElement(c.a,null,y.a.createElement(A,Object.assign({},this.formItemLayout,{label:"\u63cf\u8ff0"}),e("desc",{initialValue:a.desc,rules:[{required:!1,message:"\u8bf7\u586b\u5199\u63cf\u8ff0!"}]})(y.a.createElement(V,{rows:3,style:{width:852},value:a.desc,onChange:this.inputChange.bind(this,"desc")})))),y.a.createElement(c.a,null,y.a.createElement(f.a.Item,null,y.a.createElement(l.a,{type:"primary",htmlType:"submit"},"\u4fee\u6539")))))}}]),t}(E.Component))||i)||i;t.default=f.a.create()(D)}}]);
//# sourceMappingURL=13.a409094a.chunk.js.map