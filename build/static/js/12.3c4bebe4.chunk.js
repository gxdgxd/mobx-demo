(this.webpackJsonpapi_automation_static=this.webpackJsonpapi_automation_static||[]).push([[12],{1499:function(e,t,a){},1501:function(e,t,a){"use strict";a(1478);var n,r,l=a(1479),o=(a(1468),a(13)),i=a(65),c=a(1497),s=a(1496),p=a(66),m=a(1498),u=(a(1485),a(1486)),d=a(0),h=a.n(d),g=(a(3),a(417)),f=a(158),E=(a(1476),a(1477)),b=(a(1471),a(1472)),y=(a(638),a(1467)),v=(a(1469),a(1470)),C=v.a.Item,S=Object(g.b)("TreeManagerStore")(n=Object(g.c)(n=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(s.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"okModal",value:function(){var e=this;this.props.form.validateFieldsAndScroll((function(t,a){t||e.props.TreeManagerStore.insertTreeModule()}))}},{key:"hideModal",value:function(){this.props.TreeManagerStore.hideTreeModal()}},{key:"inputChange",value:function(e,t){t.target.value,this.props.TreeManagerStore.changeTableRequestData(e,t.target.value)}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props,a=t.treeModalVisible,n=t.tableRequestData,r=t.modalName;return h.a.createElement(E.a,Object(f.a)({destroyOnClose:!0,title:r,width:"900px",visible:a,onOk:this.okModal.bind(this),onCancel:this.hideModal.bind(this),okText:"\u4fdd\u5b58",cancelText:"\u53d6\u6d88",className:"model"},"width",500),h.a.createElement(v.a,{layout:"inline",className:"ant-advanced-search-form p-xs pb-0"},h.a.createElement(b.a,null,h.a.createElement(C,Object.assign({},this.formItemLayout,{label:"\u6a21\u5757\u540d\u79f0"}),e("name",{initialValue:n.name,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u6a21\u5757\u540d\u79f0!"}]})(h.a.createElement(y.a,{style:{width:250},placeholder:"\u8bf7\u586b\u5199\u6a21\u5757\u540d\u79f0!",onChange:this.inputChange.bind(this,"name")}))))))}}]),t}(d.Component))||n)||n,N=v.a.create()(S),O=(a(420),u.a.TreeNode),T=Object(g.b)("TreeManagerStore","TestCaseManagerStore","ApiManagerStore")(r=Object(g.c)(r=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(s.a)(t).call(this,e))).onNodeSelect=function(e,t){console.log(e,t.node.props);var n="",r="",l="",o="";1==t.node.props.level?(n=e[0],l=t.node.props.title):(n=t.node.props.appId,r=t.node.props.moduleId,l=t.node.props.appName,o=t.node.props.moduleName),console.log("appid",n,"moduleId",r,"appName",l,"moduleName",o);var i=a.props.pageType;"case"==i?a.props.TestCaseManagerStore.initData(1,n,r):"api"==i?a.props.ApiManagerStore.initData(1,n,r):"insertApi"==i?a.props.ApiManagerStore.setTreeParams(n,r,l,o):"updateApi"==i&&a.props.ApiManagerStore.setTreeParams(n,r,l,o)},a.onExpand=function(e){a.setState({expandedKeys:e})},a.handleAddTree=function(e,t,n){e.stopPropagation(),n.id&&(console.log(e.target.value),a.props.TreeManagerStore.showTreeModal({moduleName:"\u6dfb\u52a0\u6a21\u5757",type:"insert",item:n,parentId:t}))},a.handleEditTree=function(e,t,n){e.stopPropagation(),n.id&&a.props.TreeManagerStore.showTreeModal({moduleName:"\u4fee\u6539\u6a21\u5757",type:"update",item:n,parentId:t})},a.handleDeleteTree=function(e){e.id&&a.props.TreeManagerStore.deleteTree(e)},a.getNodeTitle=function(e,t,n,r,i){return h.a.createElement("div",{className:"tree-title"},h.a.createElement("span",null,e),h.a.createElement("div",{className:"tree-parent-div "},h.a.createElement("span",{className:"tree-span",onClick:function(e){return a.handleAddTree(e,r,i)}},5!==n&&h.a.createElement(o.a,{type:"plus-circle",theme:"outlined"})),h.a.createElement("span",{className:"tree-span",onClick:function(e){return a.handleEditTree(e,r,i)}},1!=n&&h.a.createElement(o.a,{type:"form",theme:"outlined"})),h.a.createElement("span",{className:"tree-span"},1!=n&&h.a.createElement(l.a,{title:"\u786e\u5b9a\u5220\u9664\u6b64\u53c2\u6570\u5417\uff1f",onConfirm:function(){return a.handleDeleteTree(i)}},h.a.createElement(o.a,{type:"delete",theme:"outlined"})))))},a.renderTree=function(e,t,n){return e&&e.map((function(e){var r=a.getNodeTitle(e.name,e.id,t,n,e);return e.modules&&e.modules.length>0?h.a.createElement(O,{title:r,key:e.id,level:t,appId:e.appId,moduleId:e.id,appName:e.appName,moduleName:e.name},a.renderTree(e.modules,t+1,e.id,e.id)):h.a.createElement(O,{title:r,key:e.id,level:t,appId:e.appId,appName:e.appName,moduleId:e.id,moduleName:e.name})}))},a.state={expandedKeys:[]},a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.TreeManagerStore.getTreeData()}}]),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.TreeManagerStore,t=e.treeAppDataSource,a=e.treeModalVisible,n=e.tableRequestData,r=e.modalName;return h.a.createElement("div",{style:{maxHeight:this.props.maxHeight,"overflow-y":"auto"}},h.a.createElement(u.a,{expandedKeys:this.state.expandedKeys,onSelect:this.onNodeSelect,onExpand:this.onExpand},this.renderTree(t,1,0)),h.a.createElement(N,{modalName:r,treeModalVisible:a,tableRequestData:n}))}}]),t}(d.Component))||r)||r;t.a=T},1508:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return d}));a(1478);var n=a(1479),r=(a(642),a(159)),l=(a(639),a(418)),o=a(158),i=(a(641),a(1482)),c=a(0),s=a.n(c);a(1499);function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(a,!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var u=function(e){return[{title:"\u63a5\u53e3ID",dataIndex:"id",key:"id",width:80,fixed:"left"},{title:"\u63a5\u53e3\u540d",dataIndex:"name",key:"name",width:230,render:function(e,t){var a=t.name.length>20?t.name.substr(0,20)+"...":t.name;return s.a.createElement("span",null,s.a.createElement(i.a,{content:t.name},a))}},m({title:"\u5e94\u7528",dataIndex:"appName",key:"appName",width:100},e.getColumnSearchProps("appName")),{title:"\u63a5\u53e3\u8def\u5f84",dataIndex:"apiClassName",key:"apiClassName",width:360},{title:"\u65b9\u6cd5\u540d",dataIndex:"apiMethodName",key:"apiMethodName",width:210,render:function(e,t){var a=s.a.createElement("div",null,s.a.createElement("span",null,"\u65b9\u6cd5\u540d\uff1a",t.apiMethodName),s.a.createElement("br",null),s.a.createElement("span",null,"\u63a5\u53e3\u8def\u5f84\uff1a",t.apiClassName),s.a.createElement("br",null),s.a.createElement("span",null,"\u5e94\u7528\uff1a",t.appName),s.a.createElement("br",null),s.a.createElement("span",null,"groupId\uff1a",t.groupId),s.a.createElement("br",null),s.a.createElement("span",null,"artifactId\uff1a",t.artifactId),s.a.createElement("br",null),s.a.createElement("span",null,"\u6a21\u5757\uff1a",t.moduleName));return s.a.createElement("span",null,s.a.createElement(i.a,{content:a},t.apiMethodName))}},{title:"\u65b9\u6cd5\u53c2\u6570",dataIndex:"argsTypeNames",key:"argsTypeNames",width:360},{title:"\u66f4\u65b0\u65f6\u95f4",dataIndex:"editTimeStr",key:"editTimeStr",width:220},{title:"\u521b\u5efa\u4eba",dataIndex:"creatorName",key:"creatorName",width:150},{title:"\u63a5\u53e3\u6807\u7b7e",dataIndex:"tags",key:"tags",width:230,render:function(e,t){return s.a.createElement("span",null,t.tags.map((function(e,t){var a=e.length>20,n=s.a.createElement(l.a,{key:e.id,color:"purple"},a?"".concat(e.value.slice(0,20),"..."):e.value);return a?s.a.createElement(r.a,{title:e.value,key:e.id},n):n})))}},{title:"\u64cd\u4f5c",width:230,key:"operation",fixed:"right",render:function(e,t){var a="/update_api?apiId="+t.id,n="/testcase_manager?apiId="+t.id,r="/edit_testcase?apiId="+t.id;return s.a.createElement("span",null,s.a.createElement("a",{href:a,target:"_blank"},"\u4fee\u6539\u63a5\u53e3"),"\xa0",s.a.createElement("a",{href:n,target:"_blank",className:"vLine"}," \u67e5\u770b\u7528\u4f8b"),"\xa0",s.a.createElement("a",{href:r,target:"_blank",className:"vLine"}," \u6dfb\u52a0\u7528\u4f8b"))}}]},d=function(e){return[m({title:"\u63a5\u53e3\u8def\u5f84",dataIndex:"apiClassName",key:"apiClassName",width:"30%"},e.getColumnSearchProps("apiClassName"),{render:function(e,t){var a=t.apiClassName.length>35?t.apiClassName.substr(0,35)+"...":t.apiClassName,n=s.a.createElement("div",null,s.a.createElement("span",null,"\u63a5\u53e3\u8def\u5f84\uff1a",t.apiClassName),s.a.createElement("br",null),s.a.createElement("span",null,"\u65b9\u6cd5\u540d\uff1a",t.apiMethodName),s.a.createElement("br",null),s.a.createElement("span",null,"\u53c2\u6570\u7c7b\u578b\uff1a",t.argsTypeNames),s.a.createElement("br",null));return s.a.createElement("span",null,s.a.createElement(i.a,{content:n},a))}}),m({title:"\u65b9\u6cd5\u540d",dataIndex:"apiMethodName",key:"apiMethodName",width:"20%"},e.getColumnSearchProps("apiMethodName"),{render:function(e,t){return s.a.createElement("span",null,s.a.createElement(i.a,{content:t.apiMethodName},t.apiMethodName))}}),{title:"\u63a5\u53e3\u540d",dataIndex:"name",key:"name",width:"17%",editable:!0,render:function(e,t){return null!=t.name?s.a.createElement("span",null,t.name):s.a.createElement("span",null,s.a.createElement("font",{color:"orange"},"\u65e0"))}},{title:"\u63cf\u8ff0",dataIndex:"desc",key:"desc",width:"17%",editable:!0,render:function(e,t){return null!=t.desc?s.a.createElement("span",null,t.desc):s.a.createElement("span",null,s.a.createElement("font",{color:"orange"},"\u65e0"))}},{title:"\u64cd\u4f5c",width:"7%",key:"operation",render:function(t,a){return s.a.createElement("div",null,s.a.createElement("span",null,s.a.createElement(n.a,{title:"\u786e\u5b9a\u6dfb\u52a0\u6b64\u63a5\u53e3\u5417\uff1f",onConfirm:function(){return e.insertApi(a)}},s.a.createElement("a",{href:"#"},"\u6dfb\u52a0"))))}}]}},1543:function(e,t,a){"use strict";a.r(t);a(1471);var n,r,l=a(1472),o=(a(643),a(419)),i=(a(1481),a(1480)),c=(a(1474),a(1475)),s=(a(1468),a(13)),p=(a(237),a(70)),m=(a(638),a(1467)),u=a(65),d=a(1497),h=a(1496),g=a(66),f=a(1498),E=a(0),b=a.n(E),y=(a(3),a(417)),v=a(1508),C=(a(640),a(195)),S=(a(1469),a(1470)),N=S.a.Item,O=C.a.Option,T=Object(y.b)("ApiManagerStore","CommonStore")(n=Object(y.c)(n=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).handleCreatorSearch=function(e){e?a.props.CommonStore.getAllCreators(e):a.setState({data:[]})},a.handleCreatorChange=function(e){a.setState({value:e}),a.props.ApiManagerStore.changeTableRequestData("creatorId",e)},a.handleSubmit=function(e){e.preventDefault(),a.props.ApiManagerStore.initData(1)},a.formItemLayout={labelCol:{span:5},wrapperCol:{span:19}},a.state={data:[],value:void 0},a}return Object(f.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){}},{key:"inputChange",value:function(e,t){this.props.ApiManagerStore.changeTableRequestData(e,t.target.value)}},{key:"optionChange",value:function(e,t){this.props.ApiManagerStore.changeTableRequestData(e,t||"")}},{key:"render",value:function(){var e=this.props.CommonStore.allCreators;return b.a.createElement(S.a,{className:"ant-advanced-search-form p-xs pb-0",onSubmit:this.handleSubmit},b.a.createElement(l.a,{gutter:48},b.a.createElement(c.a,{span:7},b.a.createElement(N,Object.assign({},this.formItemLayout,{label:"\u63a5\u53e3\u540d"}),b.a.createElement(m.a,{placeholder:"\u8bf7\u8f93\u5165\u63a5\u53e3\u540d",onChange:this.inputChange.bind(this,"name")}))),b.a.createElement(c.a,{span:7},b.a.createElement(N,Object.assign({},this.formItemLayout,{label:"\u65b9\u6cd5\u540d"}),b.a.createElement(m.a,{placeholder:"\u8bf7\u8f93\u5165\u65b9\u6cd5\u540d",onChange:this.inputChange.bind(this,"apiMethodName")}))),b.a.createElement(c.a,{span:7},b.a.createElement(N,Object.assign({},this.formItemLayout,{label:"\u63a5\u53e3ID"}),b.a.createElement(m.a,{placeholder:"\u8bf7\u8f93\u5165\u63a5\u53e3ID",onChange:this.inputChange.bind(this,"id"),allowClear:!0})))),b.a.createElement(l.a,{gutter:48},b.a.createElement(c.a,{span:7},b.a.createElement(N,Object.assign({},this.formItemLayout,{label:"\u521b\u5efa\u4eba"}),b.a.createElement(C.a,{showSearch:!0,value:this.state.value,placeholder:"\u8bf7\u8f93\u5165\u771f\u540d\u641c\u7d22(\u975e\u82b1\u540d)",style:this.props.style,defaultActiveFirstOption:!1,showArrow:!1,allowClear:!0,filterOption:!1,onSearch:this.handleCreatorSearch,onChange:this.handleCreatorChange,notFoundContent:null},e.map((function(e){return b.a.createElement(O,{key:e.userId},e.realName)}))))),b.a.createElement(c.a,{span:7},b.a.createElement(N,Object.assign({},this.formItemLayout,{label:"\u6807\u7b7e"}),b.a.createElement(C.a,{name:"tagId",allowClear:!0,placeholder:"\u8bf7\u9009\u62e9\u6807\u7b7e\u641c\u7d22",onChange:this.optionChange.bind(this,"tagId")},this.props.allTags.map((function(e){return b.a.createElement(O,{key:e.id,value:e.id},e.value)}))))),b.a.createElement(c.a,{span:3},b.a.createElement(S.a.Item,null,b.a.createElement(p.a,{type:"primary",htmlType:"submit"},b.a.createElement(s.a,{type:"search"})," \u641c\u7d22"))),b.a.createElement(c.a,{span:3},b.a.createElement(S.a.Item,null,b.a.createElement(p.a,{type:"primary",onClick:function(){window.open("/insert_api")}},b.a.createElement(s.a,{type:"plus"})," \u6dfb\u52a0\u63a5\u53e3")))))}}]),t}(E.Component))||n)||n,I=S.a.create()(T),k=a(1501),M=a(1506),j=a.n(M),w=(a(1499),Object(y.b)("ApiManagerStore","CommonStore")(r=Object(y.c)(r=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).onChangePage=function(e){console.log(e),a.props.ApiManagerStore.initData(e)},a.getColumnSearchProps=function(e){return{filterDropdown:function(t){var n=t.setSelectedKeys,r=t.selectedKeys,l=t.confirm,o=t.clearFilters;return b.a.createElement("div",{style:{padding:8}},b.a.createElement(m.a,{ref:function(e){a.searchInput=e},placeholder:"Search ".concat(e),value:r[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){return a.handleSearch(r,l,e)},style:{width:188,marginBottom:8,display:"block"}}),b.a.createElement(p.a,{type:"primary",onClick:function(){return a.handleSearch(r,l,e)},icon:"search",size:"small",style:{width:90,marginRight:8}},"Search"),b.a.createElement(p.a,{onClick:function(){return a.handleReset(o)},size:"small",style:{width:90}},"Reset"))},filterIcon:function(e){return b.a.createElement(s.a,{type:"search",style:{color:e?"#1890ff":void 0}})},onFilter:function(t,a){return a[e].toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){return a.searchInput.select()}))},render:function(t){return a.state.searchedColumn===e?b.a.createElement(j.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[a.state.searchText],autoEscape:!0,textToHighlight:t.toString()}):t}}},a.handleSearch=function(e,t,n){t(),a.setState({searchText:e[0],searchedColumn:n})},a.handleReset=function(e){e(),a.setState({searchText:""})},a.state={json_str:{},expandedKeys:[],autoExpandParent:!0,selectedKeys:[],searchText:"",searchedColumn:""},a}return Object(f.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.props.setBreadcrumb([{name:"\u63a5\u53e3\u7ba1\u7406"}]),this.props.ApiManagerStore.initData(1),this.props.CommonStore.getAllTags()}}]),Object(g.a)(t,[{key:"inputChange",value:function(e,t){var a={};a[e]=t.target.value,this.setState(a)}},{key:"render",value:function(){var e=this.props.ApiManagerStore,t=e.dataSource,a=e.pageNo,n=e.pageSize,r=e.totalCount,s=this.props.CommonStore,p=s.allTags,m=s.allCreators,u=t.toJS();return b.a.createElement("div",{className:"container-bg"},b.a.createElement(l.a,null,b.a.createElement(c.a,{span:4},b.a.createElement(k.a,{pageType:"api",maxHeight:"700px"})),b.a.createElement(c.a,{span:20},b.a.createElement(I,{allTags:p,allCreators:m}),b.a.createElement(i.a,{bordered:!0,columns:Object(v.a)(this),scroll:{x:1780,y:600},dataSource:u,pagination:!1}),b.a.createElement(o.a,{onChange:this.onChangePage,pageSize:n,current:a,total:r,style:{marginTop:"6px",float:"right"}}))))}}]),t}(E.Component))||r)||r);t.default=w}}]);
//# sourceMappingURL=12.3c4bebe4.chunk.js.map