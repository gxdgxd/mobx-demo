{"version":3,"sources":["container/ExeRecord/DetailModal.js","container/ExeRecord/index.js","container/ExeRecord/config.js"],"names":["DetailModal","inject","observer","props","state","this","modalVisible","detailData","className","destroyOnClose","title","width","visible","okText","cancelText","gutter","span","status","Component","Option","FormItem","Item","RangePicker","ExeRecordIndex","onChangePage","page","ExeRecordStore","initData","formItemLayout","labelCol","wrapperCol","handleSearch","handleCreatorSearch","value","CommonStore","getAllCreators","setState","data","handleCreatorChange","changeTableRequestData","json_str","setBreadcrumb","name","n","e","target","v","id","getDetailData","dates","dateStrings","context","dataSource","pageNo","pageSize","totalCount","allCreators","mydataSource","toJS","label","ranges","Today","moment","startOf","endOf","onChange","onDateChange","placeholder","inputChange","bind","showSearch","style","defaultActiveFirstOption","showArrow","filterOption","onSearch","notFoundContent","map","d","key","userId","realName","optionChange","type","htmlType","onClick","bordered","columns","dataIndex","render","row","color","record","showModal","current","total"],"mappings":"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","file":"static/js/16.82a3de6e.chunk.js","sourcesContent":["import React, {Component} from 'react';\nimport { observable, action, computed } from 'mobx';\nimport { observer, inject } from 'mobx-react';\nimport { Table,Input,Tree,Form,Row, Col,Button,Modal,DatePicker} from 'antd';\nimport {detailColumns} from \"./config\";\n\n\n@inject('ExeRecordStore')\n@observer\nclass DetailModal extends Component {\n\n    constructor(props){\n        super(props);\n        this.state= {\n        }\n    }\n\n    render(){\n        const {modalVisible,detailData} = this.props\n        // let caseData = detailData.caseExeRecords\n        return(\n            <div className=\"container-bg\">\n                <Modal\n                    destroyOnClose\n                    title=\"执行详情\"\n                    width=\"800px\"\n                    visible={modalVisible}\n                    okText=\"保存\"\n                    cancelText=\"取消\"\n                    className=\"model\">\n                    <Row gutter={48}>\n                        <Col span={7}>\n                           执行结果：{detailData.status}\n                        </Col>\n                    </Row>\n                </Modal>\n            </div>\n        )\n    }\n}\n\nexport default DetailModal;","import React, {Component} from 'react';\nimport { observable, action, computed } from 'mobx';\nimport { observer, inject } from 'mobx-react';\nimport { Table,Input,Select,Form,Row, Col,Button,Icon,DatePicker,Pagination} from 'antd';\nimport moment from 'moment';\nimport {columns} from \"./config\";\nimport DetailModal from \"./DetailModal\";\nconst Option = Select.Option;\n\nconst FormItem = Form.Item;\nconst { RangePicker } = DatePicker;\n\n@inject('ExeRecordStore','CommonStore')\n@observer\nclass ExeRecordIndex extends Component {\n    componentDidMount() {\n        this.props.setBreadcrumb([\n            {name: '执行记录'},\n        ]);\n        this.props.ExeRecordStore.initData(1);\n    }\n    constructor(props){\n        super(props);\n        this.state= {\n            json_str:{}\n        }\n    }\n    inputChange(n,e) {\n        this.props.ExeRecordStore.changeTableRequestData(n,e.target.value);\n    }\n    optionChange(n,v) {\n        this.props.ExeRecordStore.changeTableRequestData(n,v || '');\n    }\n    showModal(id){\n        this.props.ExeRecordStore.getDetailData(id)\n    }\n    onChangePage = page => {\n        this.props.ExeRecordStore.initData(page);\n    };\n    onDateChange(dates, dateStrings) {\n        this.props.ExeRecordStore.changeTableRequestData('exeTimeBefore',dateStrings[0]);\n        this.props.ExeRecordStore.changeTableRequestData('finishTimeAfter',dateStrings[1]);\n    }\n    formItemLayout = {\n        labelCol: { span: 5 },\n        wrapperCol: { span: 19 },\n    }\n    handleSearch = () => {\n        this.props.ExeRecordStore.initData(1);\n    }\n    handleCreatorSearch = value => {\n        if (value) {\n            this.props.CommonStore.getAllCreators(value)\n        } else {\n            this.setState({ data: [] });\n        }\n    };\n\n    handleCreatorChange = value => {\n        this.setState({ value });\n        this.props.ExeRecordStore.changeTableRequestData('operatorId',value);\n    };\n    render(){\n        const {dataSource,modalVisible,pageNo,pageSize,totalCount,detailData} = this.props.ExeRecordStore\n        const {allCreators} = this.props.CommonStore\n        const mydataSource = dataSource.toJS()\n        return(\n            <div className=\"container-bg\">\n                <Form  className=\"ant-advanced-search-form p-xs pb-0\">\n                    <Row gutter={48}>\n                        <Col span={8}>\n                            <FormItem {...this.formItemLayout} label=\"时间\">\n                                <RangePicker\n                                    ranges={{\n                                        Today: [moment(), moment()],\n                                        'This Month': [moment().startOf('month'), moment().endOf('month')],\n                                    }}\n                                    onChange={this.onDateChange}\n                                />\n                            </FormItem>\n                        </Col>\n                        <Col span={7}>\n                            <FormItem {...this.formItemLayout} label=\"场景ID\">\n                                <Input placeholder=\"请输入场景ID\"  onChange={this.inputChange.bind(this,'testSceneId')}/>\n                            </FormItem>\n                        </Col>\n                        <Col span={7}>\n                            <FormItem {...this.formItemLayout} label=\"执行环境\">\n                                <Input placeholder=\"请输入执行环境\" onChange={this.inputChange.bind(this,'env')}/>\n                            </FormItem>\n                        </Col>\n                    </Row>\n                    <Row gutter={48}>\n                        <Col span={8}>\n                            <FormItem {...this.formItemLayout} label=\"操作人\">\n                                <Select\n                                    showSearch\n                                    value={this.state.value}\n                                    placeholder=\"请输入真名搜索(非花名)\"\n                                    style={this.props.style}\n                                    defaultActiveFirstOption={false}\n                                    showArrow={false}\n                                    filterOption={false}\n                                    onSearch={this.handleCreatorSearch}\n                                    onChange={this.handleCreatorChange}\n                                    notFoundContent={null}\n                                >\n                                    {allCreators.map(d => <Option key={d.userId}>{d.realName}</Option>)}\n                                </Select>\n                            </FormItem>\n                        </Col>\n                        <Col span={7}>\n                            <FormItem {...this.formItemLayout} label=\"执行状态\">\n                                <Select placeholder=\"请选择执行状态\"   onChange={this.optionChange.bind(this,'status')}>\n                                    <Option value=\"0\">待执行</Option>\n                                    <Option value=\"1\">执行中</Option>\n                                    <Option value=\"2\">已完成</Option>\n                                </Select>\n                            </FormItem>\n                        </Col>\n                        <Col span={3}>\n                            <Button type=\"primary\" htmlType=\"submit\" onClick={this.handleSearch}>\n                                <Icon type=\"search\" /> 搜索\n                            </Button>\n                        </Col>\n                    </Row>\n                </Form>\n                <Row style={{'marginTop':'8px'}}>\n                    <Table\n                        bordered\n                        columns={columns(this)}\n                        dataSource={mydataSource} />\n                    <Pagination onChange={this.onChangePage} pageSize={pageSize} current={pageNo}  total={totalCount} style={{'marginTop':'6px','float':'right'}}/>\n\n                    <DetailModal modalVisible={modalVisible} detailData={detailData}/>\n\n                </Row>\n            </div>\n        )\n    }\n}\n\nexport default ExeRecordIndex;","import React  from 'react';\nimport { Icon,Popconfirm,Popover,Tag} from 'antd';\nimport ReactJson from 'react-json-view'\nexport const columns = (context) => [\n    {\n        title: 'ID',\n        dataIndex: 'testSceneId',\n        key: 'testSceneId',\n    },\n    {\n        title: '场景名称',\n        dataIndex: 'testSceneName',\n        key: 'testSceneName'\n    },\n    {\n        title: '执行时间',\n        dataIndex: 'exeTimeStr',\n        key: 'exeTimeStr',\n    },\n    {\n        title: '环境',\n        dataIndex: 'env',\n        key: 'env',\n    },\n    {\n        title: '总用例数',\n        dataIndex: 'testCaseCount',\n        key: 'testCaseCount',\n    },\n    {\n        title: '成功数',\n        dataIndex: 'succeedCount',\n        key: 'succeedCount',\n    },\n    {\n        title: '失败数',\n        dataIndex: 'failedCount',\n        key: 'failedCount',\n    },\n    {\n        title: '操作人',\n        dataIndex: 'operatorName',\n        key: 'operatorName',\n    },\n    {\n        title: '执行状态',\n        dataIndex: 'status',\n        key: 'status',\n        render: (row) => {\n            let name = \"\"\n            if(row == \"0\"){\n                name = \"待执行\"\n                return (\n                    <span><Tag color=\"orange\">{name}</Tag></span>\n                )\n            }else if(row == \"1\"){\n                name = \"执行中\"\n                return (\n                    <span><Tag color=\"blue\">{name}</Tag></span>\n                )\n            }else if(row == \"2\"){\n                name = \"已完成\"\n                return (\n                    <span><Tag color=\"green\">{name}</Tag></span>\n                )\n            }\n        }\n    },\n    {\n        title: '操作',\n        width: '10%',\n        key: 'operation',\n        render:(row,record) => {\n            return (\n                <div>\n                    <span>\n                        <a onClick={context.showModal.bind(context,record.id)}>详情</a> &nbsp;\n                    </span>\n                </div>\n            )\n        }\n    }\n];\n\nexport const detailColumns = (context) => [\n    {\n        title: '用例名称',\n        dataIndex: 'id',\n        key: 'id',\n    },\n    {\n        title: '执行结果',\n        dataIndex: 'result',\n        key: 'result',\n    },\n    {\n        title: '时间',\n        dataIndex: 'apiMethodName',\n        key: 'apiMethodName',\n    },\n    {\n        title: '环境',\n        dataIndex: 'apiMethodName',\n        key: 'apiMethodName',\n    },\n    {\n        title: '方法名称',\n        dataIndex: 'env',\n        key: 'env',\n    },\n    {\n        title: '参数',\n        dataIndex: 'env',\n        key: 'env',\n    },\n    {\n        title: '接口返回',\n        dataIndex: 'env',\n        key: 'env',\n        // render:function(text, record){\n        //     let str = {\"itemId\":\"111067\",\"shopId\":\"$p.result.id\",\"shopEEId\":\"6dc677030efb48fcb0c5db98fef8ef99\"}\n        //     var name = record.name.length > 12 ? record.name.substr(0,12) + '...' : record.name;\n        //\n        //     let jsonStr = <ReactJson src={str} theme=\"google\" style={{border:'1px solid #ccc','maxHeight':'261px','overflow-y':'auto' }}/>\n        //     return (\n        //         <span>\n        //             <Popover content={jsonStr} >\n        //                 <font color=\"#0c8dbf\">{name}</font>\n        //             </Popover>\n        //         </span>\n        //     )\n        // }\n    }\n];\n\n\n\n\n"],"sourceRoot":""}