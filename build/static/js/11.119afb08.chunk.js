(this.webpackJsonpapi_automation_static=this.webpackJsonpapi_automation_static||[]).push([[11],{1499:function(e,t,a){},1501:function(e,t,a){"use strict";a(1478);var n,r,i=a(1479),l=(a(1468),a(13)),s=a(65),o=a(1497),c=a(1496),u=a(66),p=a(1498),d=(a(1485),a(1486)),m=a(0),h=a.n(m),g=(a(3),a(417)),b=a(158),f=(a(1476),a(1477)),E=(a(1471),a(1472)),v=(a(638),a(1467)),y=(a(1469),a(1470)),T=y.a.Item,O=Object(g.b)("TreeManagerStore")(n=Object(g.c)(n=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(c.a)(t).call(this,e))).state={},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"okModal",value:function(){var e=this;this.props.form.validateFieldsAndScroll((function(t,a){t||e.props.TreeManagerStore.insertTreeModule()}))}},{key:"hideModal",value:function(){this.props.TreeManagerStore.hideTreeModal()}},{key:"inputChange",value:function(e,t){t.target.value,this.props.TreeManagerStore.changeTableRequestData(e,t.target.value)}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props,a=t.treeModalVisible,n=t.tableRequestData,r=t.modalName;return h.a.createElement(f.a,Object(b.a)({destroyOnClose:!0,title:r,width:"900px",visible:a,onOk:this.okModal.bind(this),onCancel:this.hideModal.bind(this),okText:"\u4fdd\u5b58",cancelText:"\u53d6\u6d88",className:"model"},"width",500),h.a.createElement(y.a,{layout:"inline",className:"ant-advanced-search-form p-xs pb-0"},h.a.createElement(E.a,null,h.a.createElement(T,Object.assign({},this.formItemLayout,{label:"\u6a21\u5757\u540d\u79f0"}),e("name",{initialValue:n.name,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u6a21\u5757\u540d\u79f0!"}]})(h.a.createElement(v.a,{style:{width:250},placeholder:"\u8bf7\u586b\u5199\u6a21\u5757\u540d\u79f0!",onChange:this.inputChange.bind(this,"name")}))))))}}]),t}(m.Component))||n)||n,M=y.a.create()(O),j=(a(420),d.a.TreeNode),I=Object(g.b)("TreeManagerStore","TestCaseManagerStore","ApiManagerStore")(r=Object(g.c)(r=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(c.a)(t).call(this,e))).onNodeSelect=function(e,t){console.log(e,t.node.props);var n="",r="",i="",l="";1==t.node.props.level?(n=e[0],i=t.node.props.title):(n=t.node.props.appId,r=t.node.props.moduleId,i=t.node.props.appName,l=t.node.props.moduleName),console.log("appid",n,"moduleId",r,"appName",i,"moduleName",l);var s=a.props.pageType;"case"==s?a.props.TestCaseManagerStore.initData(1,n,r):"api"==s?a.props.ApiManagerStore.initData(1,n,r):"insertApi"==s?a.props.ApiManagerStore.setTreeParams(n,r,i,l):"updateApi"==s&&a.props.ApiManagerStore.setTreeParams(n,r,i,l)},a.onExpand=function(e){a.setState({expandedKeys:e})},a.handleAddTree=function(e,t,n){e.stopPropagation(),n.id&&(console.log(e.target.value),a.props.TreeManagerStore.showTreeModal({moduleName:"\u6dfb\u52a0\u6a21\u5757",type:"insert",item:n,parentId:t}))},a.handleEditTree=function(e,t,n){e.stopPropagation(),n.id&&a.props.TreeManagerStore.showTreeModal({moduleName:"\u4fee\u6539\u6a21\u5757",type:"update",item:n,parentId:t})},a.handleDeleteTree=function(e){e.id&&a.props.TreeManagerStore.deleteTree(e)},a.getNodeTitle=function(e,t,n,r,s){return h.a.createElement("div",{className:"tree-title"},h.a.createElement("span",null,e),h.a.createElement("div",{className:"tree-parent-div "},h.a.createElement("span",{className:"tree-span",onClick:function(e){return a.handleAddTree(e,r,s)}},5!==n&&h.a.createElement(l.a,{type:"plus-circle",theme:"outlined"})),h.a.createElement("span",{className:"tree-span",onClick:function(e){return a.handleEditTree(e,r,s)}},1!=n&&h.a.createElement(l.a,{type:"form",theme:"outlined"})),h.a.createElement("span",{className:"tree-span"},1!=n&&h.a.createElement(i.a,{title:"\u786e\u5b9a\u5220\u9664\u6b64\u53c2\u6570\u5417\uff1f",onConfirm:function(){return a.handleDeleteTree(s)}},h.a.createElement(l.a,{type:"delete",theme:"outlined"})))))},a.renderTree=function(e,t,n){return e&&e.map((function(e){var r=a.getNodeTitle(e.name,e.id,t,n,e);return e.modules&&e.modules.length>0?h.a.createElement(j,{title:r,key:e.id,level:t,appId:e.appId,moduleId:e.id,appName:e.appName,moduleName:e.name},a.renderTree(e.modules,t+1,e.id,e.id)):h.a.createElement(j,{title:r,key:e.id,level:t,appId:e.appId,appName:e.appName,moduleId:e.id,moduleName:e.name})}))},a.state={expandedKeys:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.TreeManagerStore.getTreeData()}}]),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.TreeManagerStore,t=e.treeAppDataSource,a=e.treeModalVisible,n=e.tableRequestData,r=e.modalName;return h.a.createElement("div",{style:{maxHeight:this.props.maxHeight,"overflow-y":"auto"}},h.a.createElement(d.a,{expandedKeys:this.state.expandedKeys,onSelect:this.onNodeSelect,onExpand:this.onExpand},this.renderTree(t,1,0)),h.a.createElement(M,{modalName:r,treeModalVisible:a,tableRequestData:n}))}}]),t}(m.Component))||r)||r;t.a=I},1509:function(e,t,a){"use strict";a(1468);var n,r=a(13),i=(a(638),a(1467)),l=(a(642),a(159)),s=(a(639),a(418)),o=a(15),c=a.n(o),u=a(240),p=a(28),d=a(65),m=a(66),h=a(1497),g=a(1496),b=a(1498),f=a(0),E=a.n(f),v=a(417),y=Object(v.b)("TagManagerStore")(n=Object(v.c)(n=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).handleClose=function(e){var t=a.props.tags.filter((function(t){return t.id!==e}));console.log(t),a.setState({tags:t}),a.props.deleteTags(t)},a.showInput=function(){a.setState({inputVisible:!0},(function(){return a.input.focus()}))},a.handleInputChange=function(e){a.setState({inputValue:e.target.value})},a.handleInputConfirm=Object(p.a)(c.a.mark((function e(){var t,n,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.inputValue,n=a.state.tags,t&&-1===n.indexOf(t)&&(n=[].concat(Object(u.a)(n),[t])),e.next=5,a.props.TagManagerStore.postInsertTag(n[0]);case 5:r=e.sent,i={id:r.data,value:n[0]},a.props.getTags(i),a.setState({inputVisible:!1,inputValue:""});case 9:case"end":return e.stop()}}),e)}))),a.saveInputRef=function(e){return a.input=e},a.state={tags:[],inputVisible:!1,inputValue:""},a}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.inputVisible,n=t.inputValue;return E.a.createElement("div",null,this.props.tags.map((function(t,a){var n=t.length>20,r=E.a.createElement(s.a,{key:t.id,closable:!0,onClose:function(){return e.handleClose(t.id)}},n?"".concat(t.value.slice(0,20),"..."):t.value);return n?E.a.createElement(l.a,{title:t.value,key:t.id},r):r})),a&&E.a.createElement(i.a,{ref:this.saveInputRef,type:"text",size:"small",style:{width:78},value:n,onChange:this.handleInputChange,onBlur:this.handleInputConfirm,onPressEnter:this.handleInputConfirm}),!a&&E.a.createElement(s.a,{onClick:this.showInput,style:{background:"#fff",borderStyle:"dashed"}},E.a.createElement(r.a,{type:"plus"})," New Tag"))}}]),t}(f.Component))||n)||n;t.a=y},1542:function(e,t,a){"use strict";a.r(t);a(237);var n,r,i=a(70),l=(a(1468),a(13)),s=(a(639),a(418)),o=(a(1471),a(1472)),c=(a(1483),a(1484)),u=a(65),p=a(1497),d=a(1496),m=a(66),h=a(1498),g=(a(638),a(1467)),b=(a(1469),a(1470)),f=a(0),E=a.n(f),v=(a(3),a(417)),y=a(158),T=(a(1476),a(1477)),O=a(1501),M=(a(1499),Object(v.b)("ApiManagerStore")(n=Object(v.c)(n=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"okModal",value:function(){this.props.ApiManagerStore.setDetailDataTreeParams()}},{key:"hideTreeModal",value:function(){this.props.ApiManagerStore.hideTreeModal()}},{key:"render",value:function(){var e=this.props.treeModalVisible;return E.a.createElement(T.a,Object(y.a)({destroyOnClose:!0,title:"\u6dfb\u52a0",width:"900px",visible:e,onOk:this.okModal.bind(this),onCancel:this.hideTreeModal.bind(this),okText:"\u4fdd\u5b58",cancelText:"\u53d6\u6d88",className:"model"},"width",500),E.a.createElement("span",null,"\u91cd\u65b0\u9009\u62e9\u5e94\u7528\u548c\u6a21\u5757\uff08\u70b9\u51fb\u5bf9\u5e94\u7684\u5e94\u7528\u548c\u6a21\u5757\u5373\u4e3a\u9009\u4e2d\uff09"),E.a.createElement(O.a,{pageType:"updateApi",maxHeight:"420px"}))}}]),t}(f.Component))||n)||n),j=b.a.create()(M),I=a(1509),S=b.a.Item,k=g.a.TextArea,N=Object(v.b)("ApiManagerStore","TagManagerStore")(r=Object(v.c)(r=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).getTags=function(e){a.props.ApiManagerStore.insertTags(e)},a.deleteTags=function(e){a.props.ApiManagerStore.deleteTags(e)},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll((function(e,t){e||a.props.ApiManagerStore.updateApi(1)}))},a.state={},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.setBreadcrumb([{name:"\u63a5\u53e3\u7ba1\u7406"},{name:"\u4fee\u6539\u63a5\u53e3"}]),this.props.ApiManagerStore.getApiDetailData()}}]),Object(m.a)(t,[{key:"inputChange",value:function(e,t){var a={};a[e]=t.target.value,this.setState(a),this.props.ApiManagerStore.changeDetailData(e,t.target.value)}},{key:"showTreeModal",value:function(){this.props.ApiManagerStore.showTreeModal()}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props.ApiManagerStore,a=t.detailData,n=t.tags,r=t.treeModalVisible;return E.a.createElement("div",{style:{marginLeft:"15px"}},E.a.createElement(b.a,{layout:"inline",className:"ant-advanced-search-form p-xs pb-0",onSubmit:this.handleSubmit},E.a.createElement(c.a,{message:"api\u5305\u4fe1\u606f",type:"info",style:{backgroundColor:"#c7e7ff",border:"0px",marginBottom:"10px"}}),E.a.createElement(o.a,null,E.a.createElement(S,Object.assign({},this.formItemLayout,{label:"groupId"}),e("groupId",{initialValue:a.groupId,rules:[{required:!0,message:"\u8bf7\u586b\u5199groupId!"}]})(E.a.createElement(g.a,{disabled:!0,style:{width:190},value:a.groupId}))),E.a.createElement(S,Object.assign({},this.formItemLayout,{label:"artifactId"}),e("artifactId",{initialValue:a.artifactId,rules:[{required:!0,message:"\u8bf7\u586b\u5199artifactId!"}]})(E.a.createElement(g.a,{disabled:!0,style:{width:190},value:a.groupId})))),E.a.createElement(c.a,{message:"\u63a5\u53e3\u4fe1\u606f",type:"info",style:{backgroundColor:"#c7e7ff",border:"0px",marginBottom:"10px"}}),E.a.createElement(o.a,null,E.a.createElement(S,Object.assign({},this.formItemLayout,{label:""}),E.a.createElement(s.a,{color:"geekblue"},"\u63a5\u53e3\u5f52\u5c5e\u5e94\u7528\uff1a",a.appName)),E.a.createElement(S,Object.assign({},this.formItemLayout,{label:""}),E.a.createElement(s.a,{color:"geekblue"},"\u63a5\u53e3\u5f52\u5c5e\u6a21\u5757\uff1a",a.moduleName)),E.a.createElement(S,Object.assign({},this.formItemLayout,{label:""}),E.a.createElement("a",{href:"#",onClick:this.showTreeModal.bind(this)},E.a.createElement(l.a,{type:"edit"})," \u7f16\u8f91"),E.a.createElement(j,{treeModalVisible:r}))),E.a.createElement(o.a,null,E.a.createElement(S,Object.assign({},this.formItemLayout,{label:"\u63a5\u53e3\u8def\u5f84"}),e("apiClassName",{initialValue:a.apiClassName,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u63a5\u53e3\u8def\u5f84!"}]})(E.a.createElement(g.a,{disabled:!0,style:{width:823}})))),E.a.createElement(o.a,null,E.a.createElement(S,Object.assign({},this.formItemLayout,{label:"\u65b9\u6cd5\u540d"}),e("apiMethodName",{initialValue:a.apiMethodName,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u65b9\u6cd5\u540d!"}]})(E.a.createElement(g.a,{disabled:!0,style:{width:375}}))),E.a.createElement(S,Object.assign({},this.formItemLayout,{label:"\u63a5\u53e3\u540d"}),e("name",{initialValue:a.name,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u63a5\u53e3\u540d!"}]})(E.a.createElement(g.a,{style:{width:378},onChange:this.inputChange.bind(this,"name")})))),E.a.createElement(o.a,null,E.a.createElement(S,Object.assign({},this.formItemLayout,{label:"\u521b\u5efa\u4eba"}),e("creatorName",{initialValue:a.creatorName,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u521b\u5efa\u4eba!"}]})(E.a.createElement(g.a,{disabled:!0,style:{width:145}}))),E.a.createElement(S,Object.assign({},this.formItemLayout,{label:"\u63a5\u53e3\u6807\u7b7e"}),E.a.createElement(I.a,{tags:n,getTags:this.getTags,deleteTags:this.deleteTags}))),E.a.createElement(o.a,null,E.a.createElement(S,Object.assign({},this.formItemLayout,{label:"\u63cf\u8ff0"}),e("desc",{initialValue:a.desc,rules:[{required:!1,message:"\u8bf7\u586b\u5199\u63cf\u8ff0!"}]})(E.a.createElement(k,{rows:3,style:{width:852},value:a.desc,onChange:this.inputChange.bind(this,"desc")})))),E.a.createElement(o.a,null,E.a.createElement(b.a.Item,null,E.a.createElement(i.a,{type:"primary",htmlType:"submit"},"\u4fee\u6539")))))}}]),t}(f.Component))||r)||r;t.default=b.a.create()(N)}}]);
//# sourceMappingURL=11.119afb08.chunk.js.map