(this.webpackJsonpapi_automation_static=this.webpackJsonpapi_automation_static||[]).push([[19],{1518:function(e,t,a){"use strict";a.r(t);a(235);var n,r=a(67),l=(a(1463),a(14)),s=(a(641),a(159)),i=(a(638),a(416)),o=(a(1466),a(1467)),c=(a(1479),a(1480)),m=a(237),u=a(71),p=a(1486),h=a(1485),d=a(72),g=a(1487),b=(a(636),a(1462)),y=(a(637),a(193)),f=(a(1464),a(1465)),E=a(0),v=a.n(E),S=a(415),C=a(1496),w=a.n(C),O=a(84),I=f.a.Item,j=y.a.Option,x=b.a.TextArea,D=Object(O.b)("caseId",window.location.search),k=Object(O.b)("apiId",window.location.search),L=Object(S.b)("ApiManagerStore")(n=Object(S.b)("TestCaseManagerStore")(n=Object(S.c)(n=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(h.a)(t).call(this,e))).handleClose=function(e){var t=a.props.ApiManagerStore.tags.filter((function(t){return t.id!==e}));console.log(t),a.setState({tags:t})},a.showInput=function(){a.setState({inputVisible:!0},(function(){return a.input.focus()}))},a.handleInputChange=function(e){a.setState({inputValue:e.target.value})},a.handleInputConfirm=function(){var e=a.state.inputValue,t=a.state.tags;e&&-1===t.indexOf(e)&&(t=[].concat(Object(m.a)(t),[e])),a.props.ApiManagerStore.insertTag(t[0]),a.setState({inputVisible:!1,inputValue:""})},a.saveInputRef=function(e){return a.input=e},a.insert=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll((function(e,t){e||a.props.TestCaseManagerStore.insert(a.props.ApiManagerStore.tags)}))},a.handleAdd=function(e){a.props.TestCaseManagerStore.changeDetailData("paramScript",JSON.stringify(e.updated_src))},a.handleEdit=function(e){a.props.TestCaseManagerStore.changeDetailData("paramScript",JSON.stringify(e.updated_src))},a.handleDelete=function(e){a.props.TestCaseManagerStore.changeDetailData("paramScript",JSON.stringify(e.updated_src))},a.state={tags:[],inputVisible:!1,inputValue:"",json_str:""},a}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.setBreadcrumb([{name:"\u7528\u4f8b\u7ba1\u7406"},{name:"\u7f16\u8f91\u7528\u4f8b"}]),this.props.ApiManagerStore.getApiDetailData(),""!=D&&this.props.TestCaseManagerStore.getDetailData()}}]),Object(d.a)(t,[{key:"inputChange",value:function(e,t){t.target.value,this.props.TestCaseManagerStore.changeDetailData(e,t.target.value)}},{key:"optionChange",value:function(e,t,a){this.props.TestCaseManagerStore.changeDetailData(e,t.toString()||"")}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.props.ApiManagerStore,n=a.detailData,m=a.tags,u=this.props.TestCaseManagerStore,p=u.insertButtonStatus,h=u.updateButtonStatus,d=u.caseDetailData,g=this.state,E=g.inputVisible,S=g.inputValue;return v.a.createElement("div",{className:"container-bg",style:{marginLeft:"15px"}},v.a.createElement(f.a,{layout:"inline",className:"ant-advanced-search-form p-xs pb-0",onSubmit:this.insert},v.a.createElement(c.a,{message:"\u63a5\u53e3\u4fe1\u606f",type:"info",style:{backgroundColor:"#c7e7ff",border:"0px",marginBottom:"10px"}}),v.a.createElement(o.a,null,v.a.createElement(I,Object.assign({},this.formItemLayout,{label:"\u5e94\u7528\u540d"}),t("version",{rules:[{required:!1,message:"\u8bf7\u586b\u5199\u5e94\u7528\u540d!"}]})(v.a.createElement(y.a,{style:{width:145},showSearch:!0},v.a.createElement(j,{key:"1",value:"1"},"1")))),v.a.createElement(I,Object.assign({},this.formItemLayout,{label:"\u4e00\u7ea7\u6a21\u5757"}),t("version",{rules:[{required:!1,message:"\u8bf7\u586b\u5199\u4e00\u7ea7\u6a21\u5757!"}]})(v.a.createElement(y.a,{style:{width:145},showSearch:!0},v.a.createElement(j,{key:"1",value:"1"},"1")))),v.a.createElement(I,Object.assign({},this.formItemLayout,{label:"\u4e8c\u7ea7\u6a21\u5757"}),t("version",{rules:[{required:!1,message:"\u8bf7\u586b\u5199\u4e8c\u7ea7\u6a21\u5757!"}]})(v.a.createElement(y.a,{style:{width:145},showSearch:!0},v.a.createElement(j,{key:"1",value:"1"},"1")))),v.a.createElement(I,Object.assign({},this.formItemLayout,{label:"\u4e09\u7ea7\u6a21\u5757"}),t("version",{rules:[{required:!1,message:"\u8bf7\u586b\u5199\u4e09\u7ea7\u6a21\u5757!"}]})(v.a.createElement(y.a,{style:{width:145},showSearch:!0},v.a.createElement(j,{key:"1",value:"1"},"1"))))),v.a.createElement(o.a,null,v.a.createElement(I,Object.assign({},this.formItemLayout,{label:"\u63a5\u53e3\u8def\u5f84"}),t("apiClassName",{initialValue:n.apiClassName,rules:[{required:!1,message:"\u8bf7\u586b\u5199\u63a5\u53e3\u8def\u5f84!"}]})(v.a.createElement(b.a,{disabled:!0,style:{width:823}})))),v.a.createElement(o.a,null,v.a.createElement(I,Object.assign({},this.formItemLayout,{label:"\u65b9\u6cd5\u540d"}),t("apiMethodName",{initialValue:n.apiMethodName,rules:[{required:!1,message:"\u8bf7\u586b\u5199\u65b9\u6cd5\u540d!"}]})(v.a.createElement(b.a,{disabled:!0,style:{width:375}}))),v.a.createElement(I,Object.assign({},this.formItemLayout,{label:"\u63a5\u53e3\u540d"}),v.a.createElement(b.a,{disabled:!0,style:{width:389},value:n.name}))),v.a.createElement(o.a,null,v.a.createElement(I,Object.assign({},this.formItemLayout,{label:"\u6807\u7b7e"}),v.a.createElement("div",null,m.map((function(t,a){var n=t.length>20,r=v.a.createElement(i.a,{key:t.id,closable:!0,onClose:function(){return e.handleClose(t.id)}},n?"".concat(t.value.slice(0,20),"..."):t.value);return n?v.a.createElement(s.a,{title:t.value,key:t.id},r):r})),E&&v.a.createElement(b.a,{ref:this.saveInputRef,type:"text",size:"small",style:{width:78},value:S,onChange:this.handleInputChange,onBlur:this.handleInputConfirm,onPressEnter:this.handleInputConfirm}),!E&&v.a.createElement(i.a,{onClick:this.showInput,style:{background:"#fff",borderStyle:"dashed"}},v.a.createElement(l.a,{type:"plus"})," New Tag")))),v.a.createElement(c.a,{message:"\u7528\u4f8b\u4fe1\u606f",type:"info",style:{backgroundColor:"#c7e7ff",border:"0px",marginBottom:"10px"}}),v.a.createElement(o.a,null,v.a.createElement(I,Object.assign({},this.formItemLayout,{label:"\u7528\u4f8b\u540d"}),t("name",{initialValue:d.name,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u7528\u4f8b\u540d!"}]})(v.a.createElement(b.a,{style:{width:365},onChange:this.inputChange.bind(this,"name")}))),v.a.createElement(I,Object.assign({},this.formItemLayout,{label:"\u4f18\u5148\u7ea7"}),v.a.createElement("span",null,v.a.createElement(y.a,{value:d.priority,style:{width:120},onChange:this.optionChange.bind(this,"priority")},v.a.createElement(j,{value:"1"},"1"),v.a.createElement(j,{value:"2"},"2"),v.a.createElement(j,{value:"3"},"3"),v.a.createElement(j,{value:"4"},"4")),"\xa0\xa0\xa0",v.a.createElement(i.a,{color:"magenta"}," 1\u4e3a\u6700\u9ad8\uff0c4\u4e3a\u6700\u4f4e ")))),v.a.createElement(o.a,null,v.a.createElement(I,Object.assign({},this.formItemLayout,{label:"\u63cf\u8ff0"}),t("desc",{initialValue:d.desc,rules:[{required:!1,message:"\u8bf7\u586b\u5199\u7528\u4f8b\u63cf\u8ff0!"}]})(v.a.createElement(x,{rows:3,style:{width:852},onChange:this.inputChange.bind(this,"desc")})))),v.a.createElement(c.a,{message:"\u8bf7\u6c42\u5165\u53c2",type:"info",style:{backgroundColor:"#c7e7ff",border:"0px",marginBottom:"10px"}}),v.a.createElement(o.a,null,v.a.createElement("div",{style:{float:"left",width:"50%"}},v.a.createElement(w.a,{src:n.argsJsonFormat,onAdd:this.handleAdd,onEdit:this.handleEdit,onDelete:this.handleDelete,theme:"google",style:{border:"1px solid #ccc",maxHeight:"325px","overflow-y":"auto"}})),v.a.createElement("div",{style:{float:"right",width:"49%"}},v.a.createElement(x,{value:d.paramScript,rows:15,style:{width:"1300px"},onChange:this.inputChange.bind(this,"paramScript")}))),v.a.createElement(c.a,{message:"\u5176\u4ed6\u53c2\u6570\uff08dubbo rpc parameter\uff09",type:"info",style:{backgroundColor:"#c7e7ff",border:"0px",marginBottom:"10px"}}),v.a.createElement(o.a,null,v.a.createElement(I,Object.assign({},this.formItemLayout,{label:""}),t("contextParamScript",{initialValue:d.contextParamScript,rules:[{required:!1,message:"\u8bf7\u586b\u5199\u5176\u4ed6\u53c2\u6570!"}]})(v.a.createElement(x,{rows:3,style:{width:1210},onChange:this.inputChange.bind(this,"contextParamScript")})))),v.a.createElement(c.a,{message:"\u7ed3\u679c\u6821\u9a8c\u89c4\u5219",type:"info",style:{backgroundColor:"#c7e7ff",border:"0px",marginBottom:"10px"}}),v.a.createElement(o.a,null,v.a.createElement(I,Object.assign({},this.formItemLayout,{label:""}),t("validScript",{initialValue:d.validScript,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u7528\u4f8b\u6821\u9a8c\u89c4\u5219!"}]})(v.a.createElement(x,{rows:4,style:{width:1210},placeholder:"\u5982\uff1aresult != null  && result.data != null && result.data.size() > 0 && result.data.id == $p.result.id",onChange:this.inputChange.bind(this,"validScript")})))),v.a.createElement(o.a,null,v.a.createElement(I,Object.assign({},this.formItemLayout,{label:"",style:{display:p}}),v.a.createElement(r.a,{type:"primary",htmlType:"submit",style:{marginBottom:"8px"}},"\u6dfb\u52a0\u7528\u4f8b")),v.a.createElement(I,Object.assign({},this.formItemLayout,{label:"",style:{display:h}}),v.a.createElement(r.a,{type:"primary",htmlType:"submit",style:{marginBottom:"8px"}},"\u4fee\u6539\u7528\u4f8b")),v.a.createElement(I,Object.assign({},this.formItemLayout,{label:"",style:{display:h}}),v.a.createElement(r.a,{type:"primary",htmlType:"submit",style:{marginBottom:"8px"},onClick:function(){window.open("/edit_testcase?type=copy&apiId="+k+"&caseId="+D)}},"\u590d\u5236\u7528\u4f8b")),v.a.createElement(I,Object.assign({},this.formItemLayout,{label:""}),v.a.createElement(r.a,{type:"primary",htmlType:"submit",style:{marginBottom:"8px"}},"\u53ea\u6d4b\u8bd5\u4e0d\u4fdd\u5b58")),v.a.createElement(I,Object.assign({},this.formItemLayout,{label:""}),v.a.createElement(b.a,{style:{width:280},placeholder:"\u8bf7\u8f93\u5165\u6d4b\u8bd5\u7528\u7684dubbo\u5206\u7ec4"})))))}}]),t}(E.Component))||n)||n)||n;t.default=f.a.create()(L)}}]);
//# sourceMappingURL=19.9a872a80.chunk.js.map