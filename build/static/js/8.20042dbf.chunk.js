(this.webpackJsonpapi_automation_static=this.webpackJsonpapi_automation_static||[]).push([[8],{1491:function(e,a,t){},1493:function(e,a,t){"use strict";var n,r,o=t(16),l=t.n(o),s=t(29),i=(t(1476),t(1477)),c=(t(1468),t(14)),p=t(65),d=t(1489),m=t(1488),u=t(66),h=t(1490),f=(t(1481),t(1482)),b=t(0),g=t.n(b),E=(t(5),t(416)),C=t(236),v=(t(1472),t(1473)),y=(t(1466),t(1467)),x=(t(637),t(1465)),S=(t(1463),t(1464)),T=S.a.Item,O=Object(E.b)("TreeManagerStore")(n=Object(E.c)(n=function(e){function a(e){var t;return Object(p.a)(this,a),(t=Object(d.a)(this,Object(m.a)(a).call(this,e))).state={},t}return Object(h.a)(a,e),Object(u.a)(a,[{key:"okModal",value:function(){var e=this;this.props.form.validateFieldsAndScroll((function(a,t){a||e.props.TreeManagerStore.insertTreeModule()}))}},{key:"hideModal",value:function(){this.props.TreeManagerStore.hideTreeModal()}},{key:"inputChange",value:function(e,a){a.target.value,this.props.TreeManagerStore.changeTableRequestData(e,a.target.value)}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,a=this.props,t=a.treeModalVisible,n=a.tableRequestData,r=a.modalName;return g.a.createElement(v.a,Object(C.a)({destroyOnClose:!0,title:r,width:"900px",visible:t,onOk:this.okModal.bind(this),onCancel:this.hideModal.bind(this),okText:"\u4fdd\u5b58",cancelText:"\u53d6\u6d88",className:"model"},"width",500),g.a.createElement(S.a,{layout:"inline",className:"ant-advanced-search-form p-xs pb-0"},g.a.createElement(y.a,null,g.a.createElement(T,Object.assign({},this.formItemLayout,{label:"\u6a21\u5757\u540d\u79f0"}),e("name",{initialValue:n.name,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u6a21\u5757\u540d\u79f0!"}]})(g.a.createElement(x.a,{style:{width:250},placeholder:"\u8bf7\u586b\u5199\u6a21\u5757\u540d\u79f0!",onChange:this.inputChange.bind(this,"name")}))))))}}]),a}(b.Component))||n)||n,k=S.a.create()(O),M=(t(419),f.a.TreeNode),j=Object(E.b)("TreeManagerStore","TestCaseManagerStore","ApiManagerStore")(r=Object(E.c)(r=function(e){function a(e){var t;return Object(p.a)(this,a),(t=Object(d.a)(this,Object(m.a)(a).call(this,e))).onSelect=function(e,a){console.log(a);var n=a.node.props.dataRef.appId,r=a.node.props.dataRef.moduleId,o=a.node.props.dataRef.appName,l=a.node.props.dataRef.moduleName,s=t.props.pageType;"case"==s?t.props.TestCaseManagerStore.initData(1,n,r):"api"==s?t.props.ApiManagerStore.initData(1,n,r):"insertApi"==s?t.props.ApiManagerStore.setTreeParams(n,r,o,l):"updateApi"==s&&t.props.ApiManagerStore.setTreeParams(n,r,o,l)},t.handleAddTree=function(e,a,n,r){e.stopPropagation(),a&&(console.log(e.target.value),t.props.TreeManagerStore.showTreeModal({moduleName:"\u6dfb\u52a0\u6a21\u5757",parentId:n,appId:r,type:"insert"}))},t.handleEditTree=function(e,a,n,r,o){e.stopPropagation(),n&&t.props.TreeManagerStore.showTreeModal({id:n,moduleName:"\u4fee\u6539\u6a21\u5757",parentIdF:r,appId:o,name:a,type:"update"})},t.handleDeleteTree=function(e,a,n){e&&t.props.TreeManagerStore.deleteTree(e,a,n)},t.getNodeTitle=function(e,a,n,r,o,l){return g.a.createElement("div",{className:"tree-title"},g.a.createElement("span",null,e),g.a.createElement("div",{className:"tree-parent-div "},g.a.createElement("span",{className:"tree-span",onClick:function(e){return t.handleAddTree(e,a,r,l)}},4!==n&&g.a.createElement(c.a,{type:"plus-circle",theme:"outlined"})),g.a.createElement("span",{className:"tree-span",onClick:function(n){return t.handleEditTree(n,e,a,o,l)}},1!=n&&g.a.createElement(c.a,{type:"form",theme:"outlined"})),g.a.createElement("span",{className:"tree-span"},1!=n&&g.a.createElement(i.a,{title:"\u786e\u5b9a\u5220\u9664\u6b64\u53c2\u6570\u5417\uff1f",onConfirm:function(){return t.handleDeleteTree(a,l,r)}},g.a.createElement(c.a,{type:"delete",theme:"outlined"})))))},t.onLoadData=function(){var e=Object(s.a)(l.a.mark((function e(a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.props.children){e.next=2;break}return e.abrupt("return");case 2:t.props.TreeManagerStore.getTreeModuleDataSouce(a.props.dataRef);case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),t.renderTreeNodes=function(e,a){return e.map((function(e){var n=t.getNodeTitle(e.title,e.id,a,e.parentId,e.parentIdF,e.appId);return e.children?g.a.createElement(M,{title:n,key:e.id,dataRef:e},t.renderTreeNodes(e.children,a+1)):g.a.createElement(M,Object.assign({},e,{title:n,key:e.id,dataRef:e}))}))},t}return Object(h.a)(a,e),Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.TreeManagerStore.getTreeAppDataSouce()}}]),Object(u.a)(a,[{key:"render",value:function(){var e=this.props.TreeManagerStore,a=e.treeAppDataSource,t=e.treeModalVisible,n=e.tableRequestData,r=e.modalName;return g.a.createElement("div",{style:{maxHeight:this.props.maxHeight,"overflow-y":"auto"}},g.a.createElement(f.a,{onSelect:this.onSelect,loadData:this.onLoadData},this.renderTreeNodes(a,1)),g.a.createElement(k,{modalName:r,treeModalVisible:t,tableRequestData:n}))}}]),a}(b.Component))||r)||r;a.a=j},1495:function(e,a,t){"use strict";t(235);var n,r=t(69),o=(t(1468),t(14)),l=(t(1466),t(1467)),s=(t(1470),t(1471)),i=(t(637),t(1465)),c=t(65),p=t(66),d=t(1489),m=t(1488),u=t(1490),h=(t(639),t(193)),f=(t(1463),t(1464)),b=t(0),g=t.n(b),E=t(416),C=f.a.Item,v=h.a.Option,y=Object(E.b)("TestCaseManagerStore","CommonStore")(n=Object(E.c)(n=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(d.a)(this,Object(m.a)(a).call(this,e))).handleSearch=function(){t.props.TestCaseManagerStore.initData(1)},t.handleCreatorSearch=function(e){e?t.props.CommonStore.getAllCreators(e):t.setState({data:[]})},t.handleCreatorChange=function(e){t.setState({value:e}),t.props.TestCaseManagerStore.changeTableRequestData("creatorId",e)},t.formItemLayout={labelCol:{span:5},wrapperCol:{span:19}},t.state={data:[],value:void 0},t}return Object(u.a)(a,e),Object(p.a)(a,[{key:"componentDidMount",value:function(){this.props.CommonStore.getAllTags()}},{key:"inputChange",value:function(e,a){this.props.TestCaseManagerStore.changeTableRequestData(e,a.target.value)}},{key:"optionChange",value:function(e,a){this.props.TestCaseManagerStore.changeTableRequestData(e,a||"")}},{key:"render",value:function(){var e=this.props.CommonStore,a=e.allTags,t=e.allCreators;return g.a.createElement(f.a,{className:"ant-advanced-search-form p-xs pb-0"},g.a.createElement(l.a,{gutter:48},g.a.createElement(s.a,{span:7},g.a.createElement(C,Object.assign({},this.formItemLayout,{label:"\u63a5\u53e3ID"}),g.a.createElement(i.a,{placeholder:"\u8bf7\u8f93\u5165\u63a5\u53e3ID",allowClear:!0,onChange:this.inputChange.bind(this,"apiId")}))),g.a.createElement(s.a,{span:7},g.a.createElement(C,Object.assign({},this.formItemLayout,{label:"\u7528\u4f8b\u540d"}),g.a.createElement(i.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u4f8b\u540d",allowClear:!0,onChange:this.inputChange.bind(this,"name")}))),g.a.createElement(s.a,{span:7},g.a.createElement(C,Object.assign({},this.formItemLayout,{label:"\u6807\u7b7e"}),g.a.createElement(h.a,{name:"tagId",allowClear:!0,placeholder:"\u8bf7\u9009\u62e9\u6807\u7b7e\u641c\u7d22",onChange:this.optionChange.bind(this,"tagId")},a.map((function(e){return g.a.createElement(v,{key:e.id,value:e.id},e.value)})))))),g.a.createElement(l.a,{gutter:48},g.a.createElement(s.a,{span:7},g.a.createElement(C,Object.assign({},this.formItemLayout,{label:"\u521b\u5efa\u4eba"}),g.a.createElement(h.a,{showSearch:!0,allowClear:!0,value:this.state.value,placeholder:"\u8bf7\u8f93\u5165\u771f\u540d\u641c\u7d22(\u975e\u82b1\u540d)",style:this.props.style,defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,onSearch:this.handleCreatorSearch,onChange:this.handleCreatorChange,notFoundContent:null},t.map((function(e){return g.a.createElement(v,{key:e.userId},e.realName)}))))),g.a.createElement(s.a,{span:7},g.a.createElement(C,Object.assign({},this.formItemLayout,{label:"\u4f18\u5148\u7ea7"}),g.a.createElement(h.a,{placeholder:"\u8bf7\u9009\u62e9\u4f18\u5148\u7ea7\u641c\u7d22",allowClear:!0,onChange:this.optionChange.bind(this,"priority")},g.a.createElement(v,{value:"1"},"1"),g.a.createElement(v,{value:"2"},"2"),g.a.createElement(v,{value:"3"},"3"),g.a.createElement(v,{value:"4"},"4")))),g.a.createElement(s.a,{span:3,style:{marginTop:"3px"}},g.a.createElement(r.a,{type:"primary",onClick:this.handleSearch},g.a.createElement(o.a,{type:"search"})," \u641c\u7d22"))))}}]),a}(b.Component))||n)||n;a.a=f.a.create()(y)},1499:function(e,a,t){"use strict";t(1463);var n,r=t(1464),o=(t(1483),t(1484)),l=(t(1479),t(1480)),s=(t(1466),t(1467)),i=(t(1470),t(1471)),c=(t(638),t(417)),p=t(65),d=t(66),m=t(1489),u=t(1488),h=t(1490),f=(t(637),t(1465)),b=t(0),g=t.n(b),E=t(416),C=t(420),v=f.a.TextArea,y=Object(E.b)("TestCaseManagerStore")(n=Object(E.c)(n=function(e){function a(e){var t;return Object(p.a)(this,a),(t=Object(m.a)(this,Object(u.a)(a).call(this,e))).onClose=function(){t.props.TestCaseManagerStore.hideCaseDrawer()},t.state={visible:!1},t}return Object(h.a)(a,e),Object(d.a)(a,[{key:"render",value:function(){var e=this.props,a=e.exeDetailData,t=e.drawerVisible,n=Object(C.toJS)(a.caseExeRecords),r="";0==a.status?r=g.a.createElement(c.a,{color:"#f50"},"\u5f85\u6267\u884c"):1==a.status?r=g.a.createElement(c.a,{color:"#2db7f5"},"\u6267\u884c\u4e2d"):2==a.status&&(r=g.a.createElement(c.a,{color:"#87d068"},"\u5df2\u5b8c\u6210"));var p="";"undefined"!=typeof n&&(p=1==n[0].testCase.succeed?g.a.createElement(c.a,{color:"#87d068"},"\u6267\u884c\u6210\u529f"):g.a.createElement(c.a,{color:"#f50"},"\u6267\u884c\u5931\u8d25")),console.log("undefined"==typeof n?"":n[0].testCase);var d={marginBottom:"8px"};return g.a.createElement(o.a,{title:"\u6267\u884c\u7ed3\u679c",width:720,placement:"right",onClose:this.onClose,visible:t},g.a.createElement(s.a,{gutter:48,style:d},g.a.createElement(i.a,{span:13},"undefined"==typeof n?"":n[0].testCase.name),g.a.createElement(i.a,{span:6},"\u4efb\u52a1\u72b6\u6001\uff1a",r)),g.a.createElement(s.a,{gutter:48,style:d},g.a.createElement(i.a,{span:13},"\u64cd\u4f5c\u4eba\uff1a",a.operatorName),g.a.createElement(i.a,{span:10},"\u6267\u884c\u73af\u5883\uff1a",a.env)),g.a.createElement(s.a,{gutter:48,style:d},g.a.createElement(i.a,{span:13},"\u6267\u884c\u65f6\u95f4\uff1a",a.exeTimeStr),g.a.createElement(i.a,{span:8},"\u6267\u884c\u7ed3\u679c\uff1a",p)),g.a.createElement(s.a,{gutter:48,style:d},g.a.createElement(i.a,{span:13},"\u63a5\u53e3\u540d\uff1a ","undefined"==typeof n?"":n[0].testCase.testApi.name)),g.a.createElement(l.a,{message:"\u6821\u9a8c\u7ed3\u679c",type:"info",style:{backgroundColor:"#c7e7ff",border:"0px",marginBottom:"10px"}}),g.a.createElement("pre",null,"undefined"==typeof n?"":null==n[0].message?"\u6682\u65e0\u7ed3\u679c":n[0].message),g.a.createElement(l.a,{message:"\u8fd4\u56de\u7ed3\u679c",type:"info",style:{backgroundColor:"#c7e7ff",border:"0px",marginBottom:"10px"}}),g.a.createElement(v,{rows:5,style:{width:"670px",marginBottom:"6px"},value:"undefined"==typeof n?"":n[0].testCase.testApi.resultJsonFormat}),g.a.createElement(l.a,{message:"\u8bf7\u6c42\u5165\u53c2",type:"info",style:{backgroundColor:"#c7e7ff",border:"0px",marginBottom:"10px"}}),g.a.createElement(v,{rows:5,style:{width:"670px",marginBottom:"6px"},value:"undefined"==typeof n?"":n[0].testCase.paramScript}),g.a.createElement(l.a,{message:"dubbo contextParams",type:"info",style:{backgroundColor:"#c7e7ff",border:"0px",marginBottom:"10px"}}),g.a.createElement(v,{rows:3,style:{width:"670px",marginBottom:"6px"},value:"undefined"==typeof n?"":n[0].testCase.contextParamScript}))}}]),a}(b.Component))||n)||n;a.a=r.a.create()(y)},1530:function(e,a,t){"use strict";t.r(a);t(1466);var n,r,o=t(1467),l=(t(641),t(418)),s=(t(1475),t(1474)),i=(t(1470),t(1471)),c=t(65),p=t(1489),d=t(1488),m=t(66),u=t(1490),h=t(0),f=t.n(h),b=(t(5),t(416)),g=t(236),E=(t(640),t(1478)),C=(t(1491),function(e){var a;return[{title:"\u7528\u4f8bID",dataIndex:"id",key:"id",width:80,fixed:"left"},{title:"\u7528\u4f8b\u540d\u79f0",dataIndex:"name",key:"name",width:200,render:function(e,a){var t=a.name.length>16?a.name.substr(0,16)+"...":a.name,n=f.a.createElement("div",null,f.a.createElement("span",null,"\u7528\u4f8b\u540d\u79f0\uff1a",a.name),f.a.createElement("br",null),f.a.createElement("span",null,"\u6821\u9a8c\u89c4\u5219\uff1a",a.validScript),f.a.createElement("br",null),f.a.createElement("span",null,"\u5165\u53c2\uff1a",a.paramScript),f.a.createElement("br",null),f.a.createElement("span",null,"\u5176\u4ed6\u53c2\u6570\uff1a",a.contextParamScript),f.a.createElement("br",null),f.a.createElement("span",null,"\u63cf\u8ff0\uff1a",a.desc),f.a.createElement("br",null),f.a.createElement("span",null,"\u63a5\u53e3\u8def\u5f84\uff1a",a.testApi.apiClassName),f.a.createElement("br",null),f.a.createElement("span",null,"\u65b9\u6cd5\u540d\uff1a",a.testApi.apiMethodName),f.a.createElement("br",null),f.a.createElement("span",null,"\u63a5\u53e3\u540d\uff1a",a.testApi.name),f.a.createElement("br",null));return f.a.createElement("span",null,f.a.createElement(E.a,{content:n},f.a.createElement("font",{color:"#d2a216"},t)))}},{title:"\u4f18\u5148\u7ea7",dataIndex:"priority",key:"priority",width:80},{title:"\u5e94\u7528",dataIndex:"appName",key:"appName",width:100},{title:"\u6a21\u5757",dataIndex:"moduleName",key:"moduleName",width:150},{title:"\u63a5\u53e3ID",dataIndex:"apiId",key:"apiId",width:80},{title:"\u521b\u5efa\u4eba",dataIndex:"creatorName",key:"creatorName",width:150},{title:"\u66f4\u65b0\u65f6\u95f4",dataIndex:"editTimeStr",key:"editTimeStr",width:200},(a={title:"\u64cd\u4f5c",width:"27%",key:"operation"},Object(g.a)(a,"width",267),Object(g.a)(a,"fixed","right"),Object(g.a)(a,"render",(function(a,t){var n="/edit_testcase?apiId="+t.apiId,r="/update_api?apiId="+t.apiId,o="/edit_testcase?apiId="+t.apiId+"&caseId="+t.id;return f.a.createElement("span",null,f.a.createElement("a",{href:o,target:"_blank"},"\u4fee\u6539\u7528\u4f8b"),"\xa0",f.a.createElement("a",{href:n,target:"_blank",className:"vLine"}," \u8ffd\u52a0\u7528\u4f8b"),"\xa0",f.a.createElement("a",{href:r,target:"_blank",className:"vLine"}," \u67e5\u770b\u63a5\u53e3"),"\xa0",f.a.createElement("a",{onClick:e.showExeCaseModal.bind(e,[t.id]),className:"vLine"}," \u6267\u884c"))})),a)]}),v=t(1495),y=(t(1472),t(1473)),x=(t(637),t(1465)),S=t(16),T=t.n(S),O=t(29),k=(t(1463),t(1464)),M=t(301),j=k.a.Item,w=Object(b.b)("TestCaseManagerStore","ExeRecordStore")(n=Object(b.c)(n=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(p.a)(this,Object(d.a)(a).call(this,e))).timerExe=function(){var e=Object(O.a)(T.a.mark((function e(a){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.props.ExeRecordStore.getDetailData(a.data);case 2:n=e.sent,t.timerDate=setInterval((function(){return t.tick(n.status)}),1e3);case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),t.formItemLayout={labelCol:{span:5},wrapperCol:{span:19}},t.state={scheduleType:"",env:""},t}return Object(u.a)(a,e),Object(m.a)(a,[{key:"okModal",value:function(){var e=this;this.props.form.validateFieldsAndScroll(function(){var a=Object(O.a)(T.a.mark((function a(t,n){var r,o;return T.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t){a.next=13;break}return r={id:null,caseIds:e.props.caseIds,scheduleType:1,env:e.state.env},a.next=4,e.props.TestCaseManagerStore.exeCase(r,"case");case 4:if(200!=(o=a.sent).code){a.next=12;break}return e.hideExeCaseModal(),e.timerExe(o),a.next=10,e.props.TestCaseManagerStore.showCaseDrawer();case 10:a.next=13;break;case 12:M.message.warn("\u6267\u884c\u51fa\u73b0\u9519\u8bef");case 13:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}())}},{key:"handleClearTimeout",value:function(){this.timerDate&&clearInterval(this.timerDate)}},{key:"componentWillUnmount",value:function(){this.handleClearTimeout()}},{key:"tick",value:function(e){2==e&&this.handleClearTimeout()}},{key:"hideExeCaseModal",value:function(){this.props.TestCaseManagerStore.hideExeCaseModal()}},{key:"render",value:function(){var e=this,a=this.props.form.getFieldDecorator,t=this.props.exeCaseModalVisible;return f.a.createElement(y.a,{destroyOnClose:!0,title:"\u6267\u884c\u7528\u4f8b",width:"800px",visible:t,onOk:this.okModal.bind(this),onCancel:this.hideExeCaseModal.bind(this),okText:"\u6267\u884c",cancelText:"\u53d6\u6d88",className:"model"},f.a.createElement(k.a,{className:"ant-advanced-search-form p-xs pb-0"},f.a.createElement(j,Object.assign({},this.formItemLayout,{label:"\u6267\u884c\u73af\u5883"}),a("env",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6267\u884c\u73af\u5883!"}]})(f.a.createElement(x.a,{placeholder:"\u8bf7\u8f93\u5165\u6267\u884c\u73af\u5883",style:{width:220},onChange:function(a){return e.setState({env:a.target.value})}}))),f.a.createElement(j,Object.assign({},this.formItemLayout,{label:"\u6267\u884c\u65b9\u5f0f"}),f.a.createElement("span",null,"\u5e76\u884c\u6267\u884c"))))}}]),a}(h.Component))||n)||n,I=k.a.create()(w),D=t(1499),N=t(1493);M.message.config({top:200});var R=Object(b.b)("TestCaseManagerStore","CommonStore","SceneManagerStore","ExeRecordStore")(r=Object(b.c)(r=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(p.a)(this,Object(d.a)(a).call(this,e))).batchExeCase=function(){if(t.state.selectedRowKeys.length<=0)M.message.warn("\u8bf7\u5148\u52fe\u9009\u9700\u8981\u6267\u884c\u7684\u7528\u4f8b");else{for(var e=t.state.selectedRows,a=[],n=0;n<e.length;n++)a.push(e[n].id);t.showExeCaseModal(a)}},t.onChangePage=function(e){t.props.TestCaseManagerStore.initData(e)},t.state={selectedRowKeys:[],selectedRows:[]},t}return Object(u.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){this.props.setBreadcrumb([{name:"\u7528\u4f8b\u7ba1\u7406"}]),this.props.TestCaseManagerStore.initData(1)}}]),Object(m.a)(a,[{key:"showExeCaseModal",value:function(e){this.props.TestCaseManagerStore.showExeCaseModal(e)}},{key:"render",value:function(){var e=this.props.TestCaseManagerStore,a=e.dataSource,t=e.pageNo,n=e.pageSize,r=e.totalCount,c=e.exeCaseModalVisible,p=e.caseIds,d=e.drawerVisible,m=a.toJS(),u=this.props.ExeRecordStore.exeDetailData;return f.a.createElement("div",{className:"container-bg"},f.a.createElement(o.a,null,f.a.createElement(i.a,{span:4},f.a.createElement(N.a,{pageType:"case",maxHeight:"700px"})),f.a.createElement(i.a,{span:20},f.a.createElement(v.a,null),f.a.createElement(s.a,{bordered:!0,columns:C(this),pagination:!1,scroll:{x:1380,y:600},dataSource:m}),f.a.createElement(l.a,{onChange:this.onChangePage,pageSize:n,current:t,total:r,style:{marginTop:"6px",float:"right"}}),f.a.createElement(I,{exeCaseModalVisible:c,caseIds:p}),f.a.createElement(D.a,{exeDetailData:u,drawerVisible:d}))))}}]),a}(h.Component))||r)||r;a.default=R}}]);
//# sourceMappingURL=8.20042dbf.chunk.js.map