(this.webpackJsonpapi_automation_static=this.webpackJsonpapi_automation_static||[]).push([[8],{1488:function(e,t,a){},1490:function(e,t,a){"use strict";var n,r,i=a(16),o=a.n(i),l=a(29),c=(a(1475),a(1476)),s=(a(1466),a(14)),u=a(65),d=a(1486),p=a(1485),m=a(66),h=a(1487),f=(a(1480),a(1481)),g=a(0),b=a.n(g),y=(a(5),a(415)),E=a(236),v=(a(1471),a(1472)),O=(a(1465),a(1467)),S=(a(636),a(1463)),I=(a(1462),a(1464)),j=I.a.Item,w=Object(y.b)("TreeManagerStore")(n=Object(y.c)(n=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"okModal",value:function(){var e=this;this.props.form.validateFieldsAndScroll((function(t,a){t||e.props.TreeManagerStore.insertTreeModule()}))}},{key:"hideModal",value:function(){this.props.TreeManagerStore.hideTreeModal()}},{key:"inputChange",value:function(e,t){t.target.value,this.props.TreeManagerStore.changeTableRequestData(e,t.target.value)}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props,a=t.treeModalVisible,n=t.tableRequestData,r=t.modalName;return b.a.createElement(v.a,Object(E.a)({destroyOnClose:!0,title:r,width:"900px",visible:a,onOk:this.okModal.bind(this),onCancel:this.hideModal.bind(this),okText:"\u4fdd\u5b58",cancelText:"\u53d6\u6d88",className:"model"},"width",500),b.a.createElement(I.a,{layout:"inline",className:"ant-advanced-search-form p-xs pb-0"},b.a.createElement(O.a,null,b.a.createElement(j,Object.assign({},this.formItemLayout,{label:"\u6a21\u5757\u540d\u79f0"}),e("name",{initialValue:n.name,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u6a21\u5757\u540d\u79f0!"}]})(b.a.createElement(S.a,{style:{width:250},placeholder:"\u8bf7\u586b\u5199\u6a21\u5757\u540d\u79f0!",onChange:this.inputChange.bind(this,"name")}))))))}}]),t}(g.Component))||n)||n,N=I.a.create()(w),C=(a(418),f.a.TreeNode),k=Object(y.b)("TreeManagerStore","TestCaseManagerStore","ApiManagerStore")(r=Object(y.c)(r=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).onSelect=function(e,t){console.log(t);var n=t.node.props.dataRef.appId,r=t.node.props.dataRef.moduleId,i=t.node.props.dataRef.appName,o=t.node.props.dataRef.moduleName,l=a.props.pageType;"case"==l?a.props.TestCaseManagerStore.initData(1,n,r):"api"==l?a.props.ApiManagerStore.initData(1,n,r):"insertApi"==l?a.props.ApiManagerStore.setTreeParams(n,r,i,o):"updateApi"==l&&a.props.ApiManagerStore.setTreeParams(n,r,i,o)},a.handleAddTree=function(e,t,n,r){e.stopPropagation(),t&&(console.log(e.target.value),a.props.TreeManagerStore.showTreeModal({moduleName:"\u6dfb\u52a0\u6a21\u5757",parentId:n,appId:r,type:"insert"}))},a.handleEditTree=function(e,t,n,r,i){e.stopPropagation(),n&&a.props.TreeManagerStore.showTreeModal({id:n,moduleName:"\u4fee\u6539\u6a21\u5757",parentIdF:r,appId:i,name:t,type:"update"})},a.handleDeleteTree=function(e,t,n){e&&a.props.TreeManagerStore.deleteTree(e,t,n)},a.getNodeTitle=function(e,t,n,r,i,o){return b.a.createElement("div",{className:"tree-title"},b.a.createElement("span",null,e),b.a.createElement("div",{className:"tree-parent-div "},b.a.createElement("span",{className:"tree-span",onClick:function(e){return a.handleAddTree(e,t,r,o)}},4!==n&&b.a.createElement(s.a,{type:"plus-circle",theme:"outlined"})),b.a.createElement("span",{className:"tree-span",onClick:function(n){return a.handleEditTree(n,e,t,i,o)}},1!=n&&b.a.createElement(s.a,{type:"form",theme:"outlined"})),b.a.createElement("span",{className:"tree-span"},1!=n&&b.a.createElement(c.a,{title:"\u786e\u5b9a\u5220\u9664\u6b64\u53c2\u6570\u5417\uff1f",onConfirm:function(){return a.handleDeleteTree(t,o,r)}},b.a.createElement(s.a,{type:"delete",theme:"outlined"})))))},a.onLoadData=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.props.children){e.next=2;break}return e.abrupt("return");case 2:a.props.TreeManagerStore.getTreeModuleDataSouce(t.props.dataRef);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.renderTreeNodes=function(e,t){return e.map((function(e){var n=a.getNodeTitle(e.title,e.id,t,e.parentId,e.parentIdF,e.appId);return e.children?b.a.createElement(C,{title:n,key:e.id,dataRef:e},a.renderTreeNodes(e.children,t+1)):b.a.createElement(C,Object.assign({},e,{title:n,key:e.id,dataRef:e}))}))},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.TreeManagerStore.getTreeAppDataSouce()}}]),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.TreeManagerStore,t=e.treeAppDataSource,a=e.treeModalVisible,n=e.tableRequestData,r=e.modalName;return b.a.createElement("div",{style:{maxHeight:this.props.maxHeight,"overflow-y":"auto"}},b.a.createElement(f.a,{onSelect:this.onSelect,loadData:this.onLoadData},this.renderTreeNodes(t,1)),b.a.createElement(N,{modalName:r,treeModalVisible:a,tableRequestData:n}))}}]),t}(g.Component))||r)||r;t.a=k},1495:function(e,t,a){"use strict";a.d(t,"a",(function(){return p})),a.d(t,"b",(function(){return m}));a(1475);var n=a(1476),r=a(236),i=(a(641),a(158)),o=(a(637),a(416)),l=(a(639),a(1477)),c=a(0),s=a.n(c);a(1488);function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(a,!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p=function(e){return[{title:"\u63a5\u53e3ID",dataIndex:"id",key:"id",width:80,fixed:"left"},{title:"\u63a5\u53e3\u540d",dataIndex:"name",key:"name",width:180,render:function(e,t){var a=t.name.length>20?t.name.substr(0,20)+"...":t.name;return s.a.createElement("span",null,s.a.createElement(l.a,{content:t.name},a))}},{title:"\u65b9\u6cd5\u540d",dataIndex:"apiMethodName",key:"apiMethodName",width:150,render:function(e,t){var a=t.apiMethodName.length>12?t.apiMethodName.substr(0,12)+"...":t.apiMethodName,n=s.a.createElement("div",null,s.a.createElement("span",null,"\u65b9\u6cd5\u540d\uff1a",t.apiMethodName),s.a.createElement("br",null),s.a.createElement("span",null,"\u521b\u5efa\u4eba\uff1a",t.creatorName),s.a.createElement("br",null),s.a.createElement("span",null,"\u63a5\u53e3\u8def\u5f84\uff1a",t.apiClassName),s.a.createElement("br",null),s.a.createElement("span",null,"\u66f4\u65b0\u65f6\u95f4\uff1a",t.editTimeStr),s.a.createElement("br",null),s.a.createElement("span",null,"\u5e94\u7528\uff1a",t.appName),s.a.createElement("br",null),s.a.createElement("span",null,"\u6a21\u5757\uff1a",t.moduleName));return s.a.createElement("span",null,s.a.createElement(l.a,{content:n},s.a.createElement("font",{color:"#d2a216"},a)))}},{title:"\u5e94\u7528",dataIndex:"appName",key:"appName",width:100},{title:"\u6a21\u5757",dataIndex:"moduleName",key:"moduleName",width:150},{title:"groupId",dataIndex:"groupId",key:"groupId",width:150},{title:"artifactId",dataIndex:"artifactId",key:"artifactId",width:120},{title:"\u66f4\u65b0\u65f6\u95f4",dataIndex:"editTimeStr",key:"editTimeStr",width:180},{title:"\u521b\u5efa\u4eba",dataIndex:"creatorName",key:"creatorName",width:150},{title:"\u6807\u7b7e",dataIndex:"tags",key:"tags",width:150,render:function(e,t){return s.a.createElement("span",null,t.tags.map((function(e,t){var a=e.length>20,n=s.a.createElement(o.a,{key:e.id,color:"purple"},a?"".concat(e.value.slice(0,20),"..."):e.value);return a?s.a.createElement(i.a,{title:e.value,key:e.id},n):n})))}},{title:"\u64cd\u4f5c",width:230,key:"operation",fixed:"right",render:function(e,t){var a="/update_api?apiId="+t.id,n="/testcase_manager?apiId="+t.id,r="/edit_testcase?apiId="+t.id;return s.a.createElement("span",null,s.a.createElement("a",{href:a,target:"_blank"},"\u4fee\u6539\u63a5\u53e3"),"\xa0",s.a.createElement("a",{href:n,target:"_blank",className:"vLine"}," \u67e5\u770b\u7528\u4f8b"),"\xa0",s.a.createElement("a",{href:r,target:"_blank",className:"vLine"}," \u6dfb\u52a0\u7528\u4f8b"))}}]},m=function(e){return[d({title:"\u63a5\u53e3\u8def\u5f84",dataIndex:"apiClassName",key:"apiClassName",width:"27%"},e.getColumnSearchProps("apiClassName"),{render:function(e,t){var a=t.apiClassName.length>30?t.apiClassName.substr(0,30)+"...":t.apiClassName;return s.a.createElement("span",null,s.a.createElement(l.a,{content:t.apiClassName},a))}}),d({title:"\u65b9\u6cd5\u540d",dataIndex:"apiMethodName",key:"apiMethodName",width:"20%"},e.getColumnSearchProps("apiMethodName"),{render:function(e,t){var a=t.apiMethodName.length>20?t.apiMethodName.substr(0,20)+"...":t.apiMethodName;return s.a.createElement("span",null,s.a.createElement(l.a,{content:t.apiMethodName},a))}}),{title:"\u63a5\u53e3\u540d",dataIndex:"name",key:"name",width:"17%",editable:!0,render:function(e,t){return null!=t.name?s.a.createElement("span",null,t.name):s.a.createElement("span",null,s.a.createElement("font",{color:"orange"},"\u65e0"))}},{title:"\u63cf\u8ff0",dataIndex:"desc",key:"desc",width:"17%",editable:!0,render:function(e,t){return null!=t.desc?s.a.createElement("span",null,t.desc):s.a.createElement("span",null,s.a.createElement("font",{color:"orange"},"\u65e0"))}},{title:"\u64cd\u4f5c",width:"7%",key:"operation",render:function(t,a){return s.a.createElement("div",null,s.a.createElement("span",null,s.a.createElement(n.a,{title:"\u786e\u5b9a\u6dfb\u52a0\u6b64\u63a5\u53e3\u5417\uff1f",onConfirm:function(){return e.insertApi(a)}},s.a.createElement("a",{href:"#"},"\u6dfb\u52a0"))))}}]}},1530:function(e,t,a){"use strict";a.r(t);var n,r,i=a(420),o=(a(1465),a(1467)),l=(a(1474),a(1473)),c=(a(637),a(416)),s=(a(1478),a(1479)),u=(a(1469),a(1470)),d=(a(1466),a(14)),p=(a(235),a(69)),m=(a(636),a(1463)),h=a(236),f=a(237),g=a(65),b=a(66),y=a(1486),E=a(1485),v=a(1487),O=(a(194),a(56)),S=(a(1462),a(1464)),I=a(0),j=a.n(I),w=a(415),N=a(1499),C=a.n(N),k=(a(1488),S.a.Item),M=Object(w.b)("ApiManagerStore")(n=Object(w.c)(n=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(y.a)(this,Object(E.a)(t).call(this,e))).handleSearch=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll((function(e,t){e||a.props.ApiManagerStore.fetchApiByGAV(1)}))},a.formItemLayout={labelCol:{span:8},wrapperCol:{span:13}},a.state={},a}return Object(v.a)(t,e),Object(b.a)(t,[{key:"inputChange",value:function(e,t){this.props.ApiManagerStore.changeTableRequestData(e,t.target.value)}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return j.a.createElement("div",null,j.a.createElement(s.a,{message:"api\u5305\u4fe1\u606f",type:"info",style:{backgroundColor:"#c7e7ff",border:"0px",marginBottom:"5px"}}),j.a.createElement(S.a,{layout:"inline",className:"ant-advanced-search-form p-xs pb-0",onSubmit:this.handleSearch},j.a.createElement(k,Object.assign({},this.formItemLayout,{label:"groupId"}),e("groupId",{rules:[{required:!0,message:"\u8bf7\u586b\u5199groupId!"}]})(j.a.createElement(m.a,{placeholder:"\u8bf7\u8f93\u5165groupId",onChange:this.inputChange.bind(this,"groupId")}))),j.a.createElement(k,Object.assign({},this.formItemLayout,{label:"artifactId"}),e("artifactId",{rules:[{required:!0,message:"\u8bf7\u586b\u5199artifactId!"}]})(j.a.createElement(m.a,{placeholder:"\u8bf7\u8f93\u5165artifactId",onChange:this.inputChange.bind(this,"artifactId")}))),j.a.createElement(k,Object.assign({},this.formItemLayout,{label:"version"}),e("version",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9version"}]})(j.a.createElement(m.a,{placeholder:"\u8bf7\u8f93\u5165version",onChange:this.inputChange.bind(this,"version")}))),j.a.createElement(S.a.Item,null,j.a.createElement(p.a,{type:"primary",htmlType:"submit"},j.a.createElement(d.a,{type:"search"})," \u641c\u7d22"))))}}]),t}(I.Component))||n)||n,T=S.a.create()(M),x=a(1495),A=a(1490);function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(a,!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var R=S.a.Item;O.a.config({top:200});var V=Object(w.b)("ApiManagerStore")(r=Object(w.c)(r=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(y.a)(this,Object(E.a)(t).call(this,e))).showInput=function(){a.setState({inputVisible:!0},(function(){return a.input.focus()}))},a.handleClose=function(e){var t=a.state.tags.filter((function(t){return t!==e}));console.log(t),a.setState({tags:t})},a.handleInputChange=function(e){a.setState({inputValue:e.target.value})},a.handleInputConfirm=function(){var e=a.state.inputValue,t=a.state.tags;e&&-1===t.indexOf(e)&&(t=[].concat(Object(f.a)(t),[e])),console.log(t),a.setState({tags:t,inputVisible:!1,inputValue:""})},a.saveInputRef=function(e){return a.input=e},a.handleSave=function(e){var t=Object(f.a)(a.props.ApiManagerStore.insertDataSource),n=t.findIndex((function(t){return e.key===t.key})),r=t[n];t.splice(n,1,P({},r,{},e)),a.props.ApiManagerStore.insertDataSource=t},a.batchInsertApi=function(){a.state.selectedRowKeysApis.length<=0?O.a.warn("\u8bf7\u5148\u52fe\u9009\u9700\u8981\u6dfb\u52a0\u7684\u63a5\u53e3"):(console.log(a.state.selectedRowKeysApis),console.log(a.state.selectedRowsApis),a.props.ApiManagerStore.insertApi(a.state.selectedRowsApis))},a.getColumnSearchProps=function(e){return{filterDropdown:function(t){var n=t.setSelectedKeys,r=t.selectedKeys,i=t.confirm,o=t.clearFilters;return j.a.createElement("div",{style:{padding:8}},j.a.createElement(m.a,{ref:function(e){a.searchInput=e},placeholder:"Search ".concat(e),value:r[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){return a.handleSearch(r,i,e)},style:{width:188,marginBottom:8,display:"block"}}),j.a.createElement(p.a,{type:"primary",onClick:function(){return a.handleSearch(r,i,e)},icon:"search",size:"small",style:{width:90,marginRight:8}},"Search"),j.a.createElement(p.a,{onClick:function(){return a.handleReset(o)},size:"small",style:{width:90}},"Reset"))},filterIcon:function(e){return j.a.createElement(d.a,{type:"search",style:{color:e?"#1890ff":void 0}})},onFilter:function(t,a){return a[e].toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){return a.searchInput.select()}))},render:function(t){return a.state.searchedColumn===e?j.a.createElement(C.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[a.state.searchText],autoEscape:!0,textToHighlight:t.toString()}):t}}},a.handleSearch=function(e,t,n){t(),a.setState({searchText:e[0],searchedColumn:n})},a.handleReset=function(e){e(),a.setState({searchText:""})},a.state={tags:[],inputVisible:!1,inputValue:"",selectedRowKeysApis:[],selectedRowsApis:[],searchText:"",searchedColumn:""},a}return Object(v.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.props.setBreadcrumb([{name:"\u63a5\u53e3\u7ba1\u7406"},{name:"\u6dfb\u52a0\u63a5\u53e3"}])}},{key:"insertApi",value:function(e){var t=[];t.push(e),this.props.ApiManagerStore.insertApi(t)}},{key:"render",value:function(){var e=this,t={body:{row:q,cell:L}},a=Object(x.b)(this).map((function(t){return t.editable?P({},t,{onCell:function(a){return{record:a,editable:t.editable,dataIndex:t.dataIndex,title:t.title,desc:t.desc,handleSave:e.handleSave}}}):t})),n={onChange:function(t,a){console.log("selectedRowKeys: ".concat(t),"selectedRows: ",a),e.setState({selectedRowKeysApis:t,selectedRowsApis:a})}},r=this.props.ApiManagerStore,i=r.insertDataSource,m=r.treeParams;return console.log(m.appId),j.a.createElement("div",{className:"container-bg"},j.a.createElement(o.a,null,j.a.createElement(u.a,{span:4},j.a.createElement(A.a,{pageType:"insertApi",maxHeight:"870px"})),j.a.createElement(u.a,{span:20},j.a.createElement(T,null),j.a.createElement(s.a,{message:"\u63a5\u53e3\u4fe1\u606f",type:"info",style:{backgroundColor:"#c7e7ff",border:"0px",marginBottom:"13px"}}),j.a.createElement(p.a,{type:"primary",style:{marginBottom:"10px"},onClick:function(){return e.batchInsertApi()}},j.a.createElement(d.a,{type:"plus"})," \u6279\u91cf\u6dfb\u52a0"),"\xa0\xa0\xa0\xa0",j.a.createElement(c.a,{color:"geekblue",style:{display:""!=m.appName&&"undefined"!=typeof m.appName?"":"none"}},j.a.createElement("span",{style:{display:""!=m.appName&&"undefined"!=typeof m.appName?"":"none"}},"\u63a5\u53e3\u5f52\u5c5e\u5e94\u7528\uff1a",m.appName),j.a.createElement("span",{style:{display:""!=m.moduleName&&"undefined"!=typeof m.moduleName?"":"none"}},"\uff0c\u63a5\u53e3\u5f52\u5c5e\u6a21\u5757\uff1a",m.moduleName),j.a.createElement("span",null,"\uff08\u70b9\u51fb\u5de6\u4fa7\u5207\u6362\u7b5b\u9009\uff09")),j.a.createElement(l.a,{components:t,rowClassName:function(){return"editable-row"},bordered:!0,columns:a,dataSource:i,rowSelection:n}))))}}]),t}(I.Component))||r)||r,q=(t.default=S.a.create()(V),S.a.create()((function(e){var t=e.form,a=(e.index,Object(i.a)(e,["form","index"]));return j.a.createElement(F.Provider,{value:t},j.a.createElement("tr",a))}))),F=j.a.createContext(),L=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(y.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={editing:!1},a.toggleEdit=function(){var e=!a.state.editing;a.setState({editing:e},(function(){e&&a.input.focus()}))},a.save=function(e){var t=a.props,n=t.record,r=t.handleSave;a.form.validateFields((function(t,i){t&&t[e.currentTarget.id]||(a.toggleEdit(),r(P({},n,{},i)))}))},a.renderCell=function(e){a.form=e;var t=a.props,n=t.children,r=t.dataIndex,i=t.record,o=t.title;return a.state.editing?j.a.createElement(R,{style:{margin:0}},e.getFieldDecorator(r,{rules:[{required:!1,message:"".concat(o," is required.")}],initialValue:i[r]})(j.a.createElement(m.a,{ref:function(e){return a.input=e},onPressEnter:a.save,onBlur:a.save}))):j.a.createElement("div",{className:"editable-cell-value-wrap",onClick:a.toggleEdit},n)},a}return Object(v.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this.props,t=e.editable,a=(e.dataIndex,e.title,e.record,e.index,e.handleSave,e.children),n=Object(i.a)(e,["editable","dataIndex","title","record","index","handleSave","children"]);return j.a.createElement("td",n,t?j.a.createElement(F.Consumer,null,this.renderCell):a)}}]),t}(j.a.Component)}}]);
//# sourceMappingURL=8.7b641b2d.chunk.js.map